var incomingCallTemplate = null;
var callData = {};
var activeCall = false;
var bankDetails = {};


function eventSend(data) {
    try {
        if (data.type == 'showBankMenu') {
            bankDetails = {
                ...data
            }
            loadContent("bank_home");

        }

        if (data.type == 'hidePhone') {
            hidePhone();
        }

        if (data.type == "showPhone") {
            if (!show) {
                showPhone();
            }

            if (data.status) {
                if (data.status == "busy") {
                    loadContent("busy_call");
                }

                if (data.status == "call_incoming") {
                    activeCall = false;
                    callData = {
                        ...data,
                    };
                    loadContent("incoming_call");

                }

                if (data.status == "call_accepted") {
                    activeCall = true;
                    loadContent("active_call");
                }

                if (data.status == "call_ended") {
                    activeCall = false;
                    callData = {};
                    hidePhone();
                }
            }
        }
    } catch (e) {
        ////mp.trigger("client:phone:debug", 'DebugPhone: ' + e + ' data: ' + jsonData)
    }
}

function formatNumber(number) {

    let _numberFirst = number.slice(0, 3);
    let _numberSecond = number.slice(3, number.length + 1);
    let _final = _numberFirst + "-" + _numberSecond;
    return _final;
}


function transferMoney() {

    var _accountNumber = $("#account-number").val();
    var _amount = $("#amount").val();

    _accountNumber = _accountNumber.split("-");

    var prefix = _accountNumber[0];
    var number = _accountNumber[1];
    var amount = parseInt(_amount);

    if (number < 10000) {
        showNotify("Uyarı", "Lütfen geçerli bir hesap numarası girin.");
        return;
    }

    if (prefix < 1 || amount < 1) {
        showNotify("Uyarı", "Lütfen girdiğiniz bilgileri kontrol edin.");
        return;
    }

    mp.trigger('client:phone:transferBank', prefix, number, amount)
    showNotify("BANKA", "Talebiniz bize ulaştı. Birkaç dakika içerisinde FAST işlemi gerçekleşecektir.");

}

function callWithNumber(number) {
    let _number = formatNumber(number);
    mp.trigger("client:phone:callwithnum", _number);
}

function acceptCall() {
    mp.trigger("client:phone:acceptCall", callData.callerNumber);
}

function cancelCall() {
    activeCall = false;
    callData = {};
    mp.trigger('client:phone:cancelCall')
}

function showBankMenu() {
    mp.trigger('client:phone:bankMenu')
}

function trigger(eventName) {
    mp.trigger(eventName);
}



/*

function enterEvent() {
    $active = $('.active');
    var action = $active.attr('act');
    var param1 = $active.attr('param1');
    var param2 = $active.attr('param2');
    if (action == 'smsList') {
        ////mp.trigger('client:phone:showSmsList')
    } else if (action == 'enableRadio') {
        hidePhone();
        ////mp.trigger('client:phone:enableRadio')
    } else if (action == 'disableRadio') {
        hidePhone();
        ////mp.trigger('client:phone:disableRadio')
    } else if (action == 'contList') {
        ////mp.trigger('client:phone:showContList')
    } else if (action == 'smsinfo') {
        ////mp.trigger('client:phone:smsInfo', parseInt(param1))
    } else if (action == 'continfo') {
        ////mp.trigger('client:phone:contInfo', parseInt(param1))
    } else if (action == 'newsms') {
        hidePhone();
        ////mp.trigger('client:phone:newSms')
    } else if (action == 'newcont') {
        hidePhone();
        ////mp.trigger('client:phone:newCont')
    } else if (action == 'newsmswithnum') {
        hidePhone();
        ////mp.trigger('client:phone:newSmsWithNum', param1)
    } else if (action == 'callwithnum') {
        hidePhone();
        ////mp.trigger('client:phone:callwithnum', param1)
    } else if (action == 'sms-del') {
        ////mp.trigger('client:phone:delSms', parseInt(param1))
    } else if (action == 'cont-del') {
        ////mp.trigger('client:phone:delCont', parseInt(param1))
    } else if (action == 'cont-ren') {
        ////mp.trigger('client:phone:renCont', parseInt(param1))
    } else if (action == 'mazeMenu') {
        if (bankPrefix == 1111) {
            ////mp.trigger('client:phone:bankMenu')
        } else {
            showContent('maze-none');
            return !1
        }
    } else if (action == 'fleecaMenu') {
        if (bankPrefix == 2222) {
            ////mp.trigger('client:phone:bankMenu')
        } else {
            showContent('fleeca-none');
            return !1
        }
    } else if (action == 'blaineMenu') {
        if (bankPrefix == 3333) {
            ////mp.trigger('client:phone:bankMenu')
        } else {
            showContent('blaine-none');
            return !1
        }
    } else if (action == 'pacificMenu') {
        if (bankPrefix == 4444) {
            ////mp.trigger('client:phone:bankMenu')
        } else {
            showContent('pacific-none');
            return !1
        }
    } else if (action == '911-1') {
        hidePhone();
        ////mp.trigger('client:phone:9111')
    } else if (action == '911-2') {
        hidePhone();
        ////mp.trigger('client:phone:9112')
    } else if (action == '911-3') {
        hidePhone();
        ////mp.trigger('client:phone:9113')
    } else if (action == 'misterk1') {
        hidePhone();
        ////mp.trigger('client:phone:misterk1')
    } else if (action == 'misterk2') {
        hidePhone();
        ////mp.trigger('client:phone:misterk2')
    } else if (action == 'gettaxi') {
        hidePhone();
        ////mp.trigger('client:phone:getTaxi', parseInt(param1))
    } else if (action == 'gettaxi2') {
        hidePhone();
        ////mp.trigger('client:phone:getTaxi2', parseInt(param1))
    } else if (action == 'loto') {
        hidePhone();
        ////mp.trigger('client:phone:invaderLoto')
    } else if (action == 'ad1') {
        hidePhone();
        ////mp.trigger('client:phone:invaderAd', 0)
    } else if (action == 'ad2') {
        hidePhone();
        ////mp.trigger('client:phone:invaderAd', 1)
    } else if (action == 'ad3') {
        hidePhone();
        ////mp.trigger('client:phone:invaderAd', 2)
    } else if (action == 'setwaypoint') {
        hidePhone();
        ////mp.trigger('client:phone:setWaypoint', parseInt(param1), parseInt(param2))
    } else if (action == 'transferBank') {
        hidePhone();
        ////mp.trigger('client:phone:transferBank')
    } else if (action == 'payTaxByNumber') {
        hidePhone();
        ////mp.trigger('client:phone:payTaxByNumber')
    }
    if (action == 'console')
        showContent('console');
    else if (action == 'browser') {
        hidePhone();
        ////mp.trigger('client:phone:showBrowser')
    } else if (action == 'tomain')
        showContent('main-' + phoneCode);
    else if (action == 'invaderMenu')
        showContent('lifeinvader');
    else if (action == 'sms-read') {
        ////mp.trigger('client:phone:readSms', $('#data-sms-text').html())
    } else if (action == 'arcadiusMenu') {
        ////mp.trigger('client:phone:arcadiusMenu')
    } else if (action == 'taxiMenu') {
        showContent('taxi')
    } else if (action == 'radioMenu') {
        showContent('radio')
    } else if (action == 'cancelCall') {
        ////mp.trigger('client:phone:cancelCall')
    } else if (action == 'taxi2Menu') {
        showContent('taxi2')
    } else showPreloader()
}

*/
