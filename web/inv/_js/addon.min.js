! function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : "undefined" != typeof module && module.exports ? module.exports = e : e(jQuery, window, document)
}(function(e) {
    ! function(t) {
        var o = "function" == typeof define && define.amd,
            a = "undefined" != typeof module && module.exports,
            n = "https:" == document.location.protocol ? "https:" : "http:",
            i = "cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";
        o || (a ? require("jquery-mousewheel")(e) : e.event.special.mousewheel || e("head").append(decodeURI("%3Cscript src=" + n + "//" + i + "%3E%3C/script%3E"))), t()
    }(function() {
        var t, o = "mCustomScrollbar",
            a = "mCS",
            n = ".mCustomScrollbar",
            i = {
                setTop: 0,
                setLeft: 0,
                axis: "y",
                scrollbarPosition: "inside",
                scrollInertia: 950,
                autoDraggerLength: !0,
                alwaysShowScrollbar: 0,
                snapOffset: 0,
                mouseWheel: {
                    enable: !0,
                    scrollAmount: "auto",
                    axis: "y",
                    deltaFactor: "auto",
                    disableOver: ["select", "option", "keygen", "datalist", "textarea"]
                },
                scrollButtons: {
                    scrollType: "stepless",
                    scrollAmount: "auto"
                },
                keyboard: {
                    enable: !0,
                    scrollType: "stepless",
                    scrollAmount: "auto"
                },
                contentTouchScroll: 25,
                documentTouchScroll: !0,
                advanced: {
                    autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                    updateOnContentResize: !0,
                    updateOnImageLoad: "auto",
                    autoUpdateTimeout: 60
                },
                theme: "light",
                callbacks: {
                    onTotalScrollOffset: 0,
                    onTotalScrollBackOffset: 0,
                    alwaysTriggerOffsets: !0
                }
            },
            r = 0,
            l = {},
            s = window.attachEvent && !window.addEventListener ? 1 : 0,
            c = !1,
            d = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag", "mCS_img_loaded", "mCS_disabled", "mCS_destroyed", "mCS_no_scrollbar", "mCS-autoHide", "mCS-dir-rtl", "mCS_no_scrollbar_y", "mCS_no_scrollbar_x", "mCS_y_hidden", "mCS_x_hidden", "mCSB_draggerContainer", "mCSB_buttonUp", "mCSB_buttonDown", "mCSB_buttonLeft", "mCSB_buttonRight"],
            u = {
                init: function(t) {
                    var t = e.extend(!0, {}, i, t),
                        o = f.call(this);
                    if (t.live) {
                        var s = t.liveSelector || this.selector || n,
                            c = e(s);
                        if ("off" === t.live) return void m(s);
                        l[s] = setTimeout(function() {
                            c.mCustomScrollbar(t), "once" === t.live && c.length && m(s)
                        }, 500)
                    } else m(s);
                    return t.setWidth = t.set_width ? t.set_width : t.setWidth, t.setHeight = t.set_height ? t.set_height : t.setHeight, t.axis = t.horizontalScroll ? "x" : p(t.axis), t.scrollInertia = t.scrollInertia > 0 && t.scrollInertia < 17 ? 17 : t.scrollInertia, "object" != typeof t.mouseWheel && 1 == t.mouseWheel && (t.mouseWheel = {
                        enable: !0,
                        scrollAmount: "auto",
                        axis: "y",
                        preventDefault: !1,
                        deltaFactor: "auto",
                        normalizeDelta: !1,
                        invert: !1
                    }), t.mouseWheel.scrollAmount = t.mouseWheelPixels ? t.mouseWheelPixels : t.mouseWheel.scrollAmount, t.mouseWheel.normalizeDelta = t.advanced.normalizeMouseWheelDelta ? t.advanced.normalizeMouseWheelDelta : t.mouseWheel.normalizeDelta, t.scrollButtons.scrollType = g(t.scrollButtons.scrollType), h(t), e(o).each(function() {
                        var o = e(this);
                        if (!o.data(a)) {
                            o.data(a, {
                                idx: ++r,
                                opt: t,
                                scrollRatio: {
                                    y: null,
                                    x: null
                                },
                                overflowed: null,
                                contentReset: {
                                    y: null,
                                    x: null
                                },
                                bindEvents: !1,
                                tweenRunning: !1,
                                sequential: {},
                                langDir: o.css("direction"),
                                cbOffsets: null,
                                trigger: null,
                                poll: {
                                    size: {
                                        o: 0,
                                        n: 0
                                    },
                                    img: {
                                        o: 0,
                                        n: 0
                                    },
                                    change: {
                                        o: 0,
                                        n: 0
                                    }
                                }
                            });
                            var n = o.data(a),
                                i = n.opt,
                                l = o.data("mcs-axis"),
                                s = o.data("mcs-scrollbar-position"),
                                c = o.data("mcs-theme");
                            l && (i.axis = l), s && (i.scrollbarPosition = s), c && (i.theme = c, h(i)), v.call(this), n && i.callbacks.onCreate && "function" == typeof i.callbacks.onCreate && i.callbacks.onCreate.call(this), e("#mCSB_" + n.idx + "_container img:not(." + d[2] + ")").addClass(d[2]), u.update.call(null, o)
                        }
                    })
                },
                update: function(t, o) {
                    var n = t || f.call(this);
                    return e(n).each(function() {
                        var t = e(this);
                        if (t.data(a)) {
                            var n = t.data(a),
                                i = n.opt,
                                r = e("#mCSB_" + n.idx + "_container"),
                                l = e("#mCSB_" + n.idx),
                                s = [e("#mCSB_" + n.idx + "_dragger_vertical"), e("#mCSB_" + n.idx + "_dragger_horizontal")];
                            if (!r.length) return;
                            n.tweenRunning && Q(t), o && n && i.callbacks.onBeforeUpdate && "function" == typeof i.callbacks.onBeforeUpdate && i.callbacks.onBeforeUpdate.call(this), t.hasClass(d[3]) && t.removeClass(d[3]), t.hasClass(d[4]) && t.removeClass(d[4]), l.css("max-height", "none"), l.height() !== t.height() && l.css("max-height", t.height()), _.call(this), "y" === i.axis || i.advanced.autoExpandHorizontalScroll || r.css("width", x(r)), n.overflowed = y.call(this), M.call(this), i.autoDraggerLength && S.call(this), b.call(this), T.call(this);
                            var c = [Math.abs(r[0].offsetTop), Math.abs(r[0].offsetLeft)];
                            "x" !== i.axis && (n.overflowed[0] ? s[0].height() > s[0].parent().height() ? B.call(this) : (G(t, c[0].toString(), {
                                dir: "y",
                                dur: 0,
                                overwrite: "none"
                            }), n.contentReset.y = null) : (B.call(this), "y" === i.axis ? k.call(this) : "yx" === i.axis && n.overflowed[1] && G(t, c[1].toString(), {
                                dir: "x",
                                dur: 0,
                                overwrite: "none"
                            }))), "y" !== i.axis && (n.overflowed[1] ? s[1].width() > s[1].parent().width() ? B.call(this) : (G(t, c[1].toString(), {
                                dir: "x",
                                dur: 0,
                                overwrite: "none"
                            }), n.contentReset.x = null) : (B.call(this), "x" === i.axis ? k.call(this) : "yx" === i.axis && n.overflowed[0] && G(t, c[0].toString(), {
                                dir: "y",
                                dur: 0,
                                overwrite: "none"
                            }))), o && n && (2 === o && i.callbacks.onImageLoad && "function" == typeof i.callbacks.onImageLoad ? i.callbacks.onImageLoad.call(this) : 3 === o && i.callbacks.onSelectorChange && "function" == typeof i.callbacks.onSelectorChange ? i.callbacks.onSelectorChange.call(this) : i.callbacks.onUpdate && "function" == typeof i.callbacks.onUpdate && i.callbacks.onUpdate.call(this)), N.call(this)
                        }
                    })
                },
                scrollTo: function(t, o) {
                    if ("undefined" != typeof t && null != t) {
                        var n = f.call(this);
                        return e(n).each(function() {
                            var n = e(this);
                            if (n.data(a)) {
                                var i = n.data(a),
                                    r = i.opt,
                                    l = {
                                        trigger: "external",
                                        scrollInertia: r.scrollInertia,
                                        scrollEasing: "mcsEaseInOut",
                                        moveDragger: !1,
                                        timeout: 60,
                                        callbacks: !0,
                                        onStart: !0,
                                        onUpdate: !0,
                                        onComplete: !0
                                    },
                                    s = e.extend(!0, {}, l, o),
                                    c = Y.call(this, t),
                                    d = s.scrollInertia > 0 && s.scrollInertia < 17 ? 17 : s.scrollInertia;
                                c[0] = X.call(this, c[0], "y"), c[1] = X.call(this, c[1], "x"), s.moveDragger && (c[0] *= i.scrollRatio.y, c[1] *= i.scrollRatio.x), s.dur = ne() ? 0 : d, setTimeout(function() {
                                    null !== c[0] && "undefined" != typeof c[0] && "x" !== r.axis && i.overflowed[0] && (s.dir = "y", s.overwrite = "all", G(n, c[0].toString(), s)), null !== c[1] && "undefined" != typeof c[1] && "y" !== r.axis && i.overflowed[1] && (s.dir = "x", s.overwrite = "none", G(n, c[1].toString(), s))
                                }, s.timeout)
                            }
                        })
                    }
                },
                stop: function() {
                    var t = f.call(this);
                    return e(t).each(function() {
                        var t = e(this);
                        t.data(a) && Q(t)
                    })
                },
                disable: function(t) {
                    var o = f.call(this);
                    return e(o).each(function() {
                        var o = e(this);
                        if (o.data(a)) {
                            o.data(a);
                            N.call(this, "remove"), k.call(this), t && B.call(this), M.call(this, !0), o.addClass(d[3])
                        }
                    })
                },
                destroy: function() {
                    var t = f.call(this);
                    return e(t).each(function() {
                        var n = e(this);
                        if (n.data(a)) {
                            var i = n.data(a),
                                r = i.opt,
                                l = e("#mCSB_" + i.idx),
                                s = e("#mCSB_" + i.idx + "_container"),
                                c = e(".mCSB_" + i.idx + "_scrollbar");
                            r.live && m(r.liveSelector || e(t).selector), N.call(this, "remove"), k.call(this), B.call(this), n.removeData(a), $(this, "mcs"), c.remove(), s.find("img." + d[2]).removeClass(d[2]), l.replaceWith(s.contents()), n.removeClass(o + " _" + a + "_" + i.idx + " " + d[6] + " " + d[7] + " " + d[5] + " " + d[3]).addClass(d[4])
                        }
                    })
                }
            },
            f = function() {
                return "object" != typeof e(this) || e(this).length < 1 ? n : this
            },
            h = function(t) {
                var o = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"],
                    a = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"],
                    n = ["minimal", "minimal-dark"],
                    i = ["minimal", "minimal-dark"],
                    r = ["minimal", "minimal-dark"];
                t.autoDraggerLength = e.inArray(t.theme, o) > -1 ? !1 : t.autoDraggerLength, t.autoExpandScrollbar = e.inArray(t.theme, a) > -1 ? !1 : t.autoExpandScrollbar, t.scrollButtons.enable = e.inArray(t.theme, n) > -1 ? !1 : t.scrollButtons.enable, t.autoHideScrollbar = e.inArray(t.theme, i) > -1 ? !0 : t.autoHideScrollbar, t.scrollbarPosition = e.inArray(t.theme, r) > -1 ? "outside" : t.scrollbarPosition
            },
            m = function(e) {
                l[e] && (clearTimeout(l[e]), $(l, e))
            },
            p = function(e) {
                return "yx" === e || "xy" === e || "auto" === e ? "yx" : "x" === e || "horizontal" === e ? "x" : "y"
            },
            g = function(e) {
                return "stepped" === e || "pixels" === e || "step" === e || "click" === e ? "stepped" : "stepless"
            },
            v = function() {
                var t = e(this),
                    n = t.data(a),
                    i = n.opt,
                    r = i.autoExpandScrollbar ? " " + d[1] + "_expand" : "",
                    l = ["<div id='mCSB_" + n.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + n.idx + "_scrollbar mCS-" + i.theme + " mCSB_scrollTools_vertical" + r + "'><div class='" + d[12] + "'><div id='mCSB_" + n.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + n.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + n.idx + "_scrollbar mCS-" + i.theme + " mCSB_scrollTools_horizontal" + r + "'><div class='" + d[12] + "'><div id='mCSB_" + n.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
                    s = "yx" === i.axis ? "mCSB_vertical_horizontal" : "x" === i.axis ? "mCSB_horizontal" : "mCSB_vertical",
                    c = "yx" === i.axis ? l[0] + l[1] : "x" === i.axis ? l[1] : l[0],
                    u = "yx" === i.axis ? "<div id='mCSB_" + n.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "",
                    f = i.autoHideScrollbar ? " " + d[6] : "",
                    h = "x" !== i.axis && "rtl" === n.langDir ? " " + d[7] : "";
                i.setWidth && t.css("width", i.setWidth), i.setHeight && t.css("height", i.setHeight), i.setLeft = "y" !== i.axis && "rtl" === n.langDir ? "989999px" : i.setLeft, t.addClass(o + " _" + a + "_" + n.idx + f + h).wrapInner("<div id='mCSB_" + n.idx + "' class='mCustomScrollBox mCS-" + i.theme + " " + s + "'><div id='mCSB_" + n.idx + "_container' class='mCSB_container' style='position:relative; top:" + i.setTop + "; left:" + i.setLeft + ";' dir='" + n.langDir + "' /></div>");
                var m = e("#mCSB_" + n.idx),
                    p = e("#mCSB_" + n.idx + "_container");
                "y" === i.axis || i.advanced.autoExpandHorizontalScroll || p.css("width", x(p)), "outside" === i.scrollbarPosition ? ("static" === t.css("position") && t.css("position", "relative"), t.css("overflow", "visible"), m.addClass("mCSB_outside").after(c)) : (m.addClass("mCSB_inside").append(c), p.wrap(u)), w.call(this);
                var g = [e("#mCSB_" + n.idx + "_dragger_vertical"), e("#mCSB_" + n.idx + "_dragger_horizontal")];
                g[0].css("min-height", g[0].height()), g[1].css("min-width", g[1].width())
            },
            x = function(t) {
                var o = [t[0].scrollWidth, Math.max.apply(Math, t.children().map(function() {
                        return e(this).outerWidth(!0)
                    }).get())],
                    a = t.parent().width();
                return o[0] > a ? o[0] : o[1] > a ? o[1] : "100%"
            },
            _ = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = e("#mCSB_" + o.idx + "_container");
                if (n.advanced.autoExpandHorizontalScroll && "y" !== n.axis) {
                    i.css({
                        width: "auto",
                        "min-width": 0,
                        "overflow-x": "scroll"
                    });
                    var r = Math.ceil(i[0].scrollWidth);
                    3 === n.advanced.autoExpandHorizontalScroll || 2 !== n.advanced.autoExpandHorizontalScroll && r > i.parent().width() ? i.css({
                        width: r,
                        "min-width": "100%",
                        "overflow-x": "inherit"
                    }) : i.css({
                        "overflow-x": "inherit",
                        position: "absolute"
                    }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                        width: Math.ceil(i[0].getBoundingClientRect().right + .4) - Math.floor(i[0].getBoundingClientRect().left),
                        "min-width": "100%",
                        position: "relative"
                    }).unwrap()
                }
            },
            w = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = e(".mCSB_" + o.idx + "_scrollbar:first"),
                    r = oe(n.scrollButtons.tabindex) ? "tabindex='" + n.scrollButtons.tabindex + "'" : "",
                    l = ["<a href='#' class='" + d[13] + "' " + r + " />", "<a href='#' class='" + d[14] + "' " + r + " />", "<a href='#' class='" + d[15] + "' " + r + " />", "<a href='#' class='" + d[16] + "' " + r + " />"],
                    s = ["x" === n.axis ? l[2] : l[0], "x" === n.axis ? l[3] : l[1], l[2], l[3]];
                n.scrollButtons.enable && i.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])
            },
            S = function() {
                var t = e(this),
                    o = t.data(a),
                    n = e("#mCSB_" + o.idx),
                    i = e("#mCSB_" + o.idx + "_container"),
                    r = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")],
                    l = [n.height() / i.outerHeight(!1), n.width() / i.outerWidth(!1)],
                    c = [parseInt(r[0].css("min-height")), Math.round(l[0] * r[0].parent().height()), parseInt(r[1].css("min-width")), Math.round(l[1] * r[1].parent().width())],
                    d = s && c[1] < c[0] ? c[0] : c[1],
                    u = s && c[3] < c[2] ? c[2] : c[3];
                r[0].css({
                    height: d,
                    "max-height": r[0].parent().height() - 10
                }).find(".mCSB_dragger_bar").css({
                    "line-height": c[0] + "px"
                }), r[1].css({
                    width: u,
                    "max-width": r[1].parent().width() - 10
                })
            },
            b = function() {
                var t = e(this),
                    o = t.data(a),
                    n = e("#mCSB_" + o.idx),
                    i = e("#mCSB_" + o.idx + "_container"),
                    r = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")],
                    l = [i.outerHeight(!1) - n.height(), i.outerWidth(!1) - n.width()],
                    s = [l[0] / (r[0].parent().height() - r[0].height()), l[1] / (r[1].parent().width() - r[1].width())];
                o.scrollRatio = {
                    y: s[0],
                    x: s[1]
                }
            },
            C = function(e, t, o) {
                var a = o ? d[0] + "_expanded" : "",
                    n = e.closest(".mCSB_scrollTools");
                "active" === t ? (e.toggleClass(d[0] + " " + a), n.toggleClass(d[1]), e[0]._draggable = e[0]._draggable ? 0 : 1) : e[0]._draggable || ("hide" === t ? (e.removeClass(d[0]), n.removeClass(d[1])) : (e.addClass(d[0]), n.addClass(d[1])))
            },
            y = function() {
                var t = e(this),
                    o = t.data(a),
                    n = e("#mCSB_" + o.idx),
                    i = e("#mCSB_" + o.idx + "_container"),
                    r = null == o.overflowed ? i.height() : i.outerHeight(!1),
                    l = null == o.overflowed ? i.width() : i.outerWidth(!1),
                    s = i[0].scrollHeight,
                    c = i[0].scrollWidth;
                return s > r && (r = s), c > l && (l = c), [r > n.height(), l > n.width()]
            },
            B = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = e("#mCSB_" + o.idx),
                    r = e("#mCSB_" + o.idx + "_container"),
                    l = [e("#mCSB_" + o.idx + "_dragger_vertical"), e("#mCSB_" + o.idx + "_dragger_horizontal")];
                if (Q(t), ("x" !== n.axis && !o.overflowed[0] || "y" === n.axis && o.overflowed[0]) && (l[0].add(r).css("top", 0), G(t, "_resetY")), "y" !== n.axis && !o.overflowed[1] || "x" === n.axis && o.overflowed[1]) {
                    var s = dx = 0;
                    "rtl" === o.langDir && (s = i.width() - r.outerWidth(!1), dx = Math.abs(s / o.scrollRatio.x)), r.css("left", s), l[1].css("left", dx), G(t, "_resetX")
                }
            },
            T = function() {
                function t() {
                    r = setTimeout(function() {
                        e.event.special.mousewheel ? (clearTimeout(r), W.call(o[0])) : t()
                    }, 100)
                }
                var o = e(this),
                    n = o.data(a),
                    i = n.opt;
                if (!n.bindEvents) {
                    if (I.call(this), i.contentTouchScroll && D.call(this), E.call(this), i.mouseWheel.enable) {
                        var r;
                        t()
                    }
                    P.call(this), U.call(this), i.advanced.autoScrollOnFocus && H.call(this), i.scrollButtons.enable && F.call(this), i.keyboard.enable && q.call(this), n.bindEvents = !0
                }
            },
            k = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = a + "_" + o.idx,
                    r = ".mCSB_" + o.idx + "_scrollbar",
                    l = e("#mCSB_" + o.idx + ",#mCSB_" + o.idx + "_container,#mCSB_" + o.idx + "_container_wrapper," + r + " ." + d[12] + ",#mCSB_" + o.idx + "_dragger_vertical,#mCSB_" + o.idx + "_dragger_horizontal," + r + ">a"),
                    s = e("#mCSB_" + o.idx + "_container");
                n.advanced.releaseDraggableSelectors && l.add(e(n.advanced.releaseDraggableSelectors)), n.advanced.extraDraggableSelectors && l.add(e(n.advanced.extraDraggableSelectors)), o.bindEvents && (e(document).add(e(!A() || top.document)).unbind("." + i), l.each(function() {
                    e(this).unbind("." + i)
                }), clearTimeout(t[0]._focusTimeout), $(t[0], "_focusTimeout"), clearTimeout(o.sequential.step), $(o.sequential, "step"), clearTimeout(s[0].onCompleteTimeout), $(s[0], "onCompleteTimeout"), o.bindEvents = !1)
            },
            M = function(t) {
                var o = e(this),
                    n = o.data(a),
                    i = n.opt,
                    r = e("#mCSB_" + n.idx + "_container_wrapper"),
                    l = r.length ? r : e("#mCSB_" + n.idx + "_container"),
                    s = [e("#mCSB_" + n.idx + "_scrollbar_vertical"), e("#mCSB_" + n.idx + "_scrollbar_horizontal")],
                    c = [s[0].find(".mCSB_dragger"), s[1].find(".mCSB_dragger")];
                "x" !== i.axis && (n.overflowed[0] && !t ? (s[0].add(c[0]).add(s[0].children("a")).css("display", "block"), l.removeClass(d[8] + " " + d[10])) : (i.alwaysShowScrollbar ? (2 !== i.alwaysShowScrollbar && c[0].css("display", "none"), l.removeClass(d[10])) : (s[0].css("display", "none"), l.addClass(d[10])), l.addClass(d[8]))), "y" !== i.axis && (n.overflowed[1] && !t ? (s[1].add(c[1]).add(s[1].children("a")).css("display", "block"), l.removeClass(d[9] + " " + d[11])) : (i.alwaysShowScrollbar ? (2 !== i.alwaysShowScrollbar && c[1].css("display", "none"), l.removeClass(d[11])) : (s[1].css("display", "none"), l.addClass(d[11])), l.addClass(d[9]))), n.overflowed[0] || n.overflowed[1] ? o.removeClass(d[5]) : o.addClass(d[5])
            },
            O = function(t) {
                var o = t.type,
                    a = t.target.ownerDocument !== document && null !== frameElement ? [e(frameElement).offset().top, e(frameElement).offset().left] : null,
                    n = A() && t.target.ownerDocument !== top.document && null !== frameElement ? [e(t.view.frameElement).offset().top, e(t.view.frameElement).offset().left] : [0, 0];
                switch (o) {
                    case "pointerdown":
                    case "MSPointerDown":
                    case "pointermove":
                    case "MSPointerMove":
                    case "pointerup":
                    case "MSPointerUp":
                        return a ? [t.originalEvent.pageY - a[0] + n[0], t.originalEvent.pageX - a[1] + n[1], !1] : [t.originalEvent.pageY, t.originalEvent.pageX, !1];
                    case "touchstart":
                    case "touchmove":
                    case "touchend":
                        var i = t.originalEvent.touches[0] || t.originalEvent.changedTouches[0],
                            r = t.originalEvent.touches.length || t.originalEvent.changedTouches.length;
                        return t.target.ownerDocument !== document ? [i.screenY, i.screenX, r > 1] : [i.pageY, i.pageX, r > 1];
                    default:
                        return a ? [t.pageY - a[0] + n[0], t.pageX - a[1] + n[1], !1] : [t.pageY, t.pageX, !1]
                }
            },
            I = function() {
                function t(e, t, a, n) {
                    if (h[0].idleTimer = d.scrollInertia < 233 ? 250 : 0, o.attr("id") === f[1]) var i = "x",
                        s = (o[0].offsetLeft - t + n) * l.scrollRatio.x;
                    else var i = "y",
                        s = (o[0].offsetTop - e + a) * l.scrollRatio.y;
                    G(r, s.toString(), {
                        dir: i,
                        drag: !0
                    })
                }
                var o, n, i, r = e(this),
                    l = r.data(a),
                    d = l.opt,
                    u = a + "_" + l.idx,
                    f = ["mCSB_" + l.idx + "_dragger_vertical", "mCSB_" + l.idx + "_dragger_horizontal"],
                    h = e("#mCSB_" + l.idx + "_container"),
                    m = e("#" + f[0] + ",#" + f[1]),
                    p = d.advanced.releaseDraggableSelectors ? m.add(e(d.advanced.releaseDraggableSelectors)) : m,
                    g = d.advanced.extraDraggableSelectors ? e(!A() || top.document).add(e(d.advanced.extraDraggableSelectors)) : e(!A() || top.document);
                m.bind("contextmenu." + u, function(e) {
                    e.preventDefault()
                }).bind("mousedown." + u + " touchstart." + u + " pointerdown." + u + " MSPointerDown." + u, function(t) {
                    if (t.stopImmediatePropagation(), t.preventDefault(), ee(t)) {
                        c = !0, s && (document.onselectstart = function() {
                            return !1
                        }), L.call(h, !1), Q(r), o = e(this);
                        var a = o.offset(),
                            l = O(t)[0] - a.top,
                            u = O(t)[1] - a.left,
                            f = o.height() + a.top,
                            m = o.width() + a.left;
                        f > l && l > 0 && m > u && u > 0 && (n = l, i = u), C(o, "active", d.autoExpandScrollbar)
                    }
                }).bind("touchmove." + u, function(e) {
                    e.stopImmediatePropagation(), e.preventDefault();
                    var a = o.offset(),
                        r = O(e)[0] - a.top,
                        l = O(e)[1] - a.left;
                    t(n, i, r, l)
                }), e(document).add(g).bind("mousemove." + u + " pointermove." + u + " MSPointerMove." + u, function(e) {
                    if (o) {
                        var a = o.offset(),
                            r = O(e)[0] - a.top,
                            l = O(e)[1] - a.left;
                        if (n === r && i === l) return;
                        t(n, i, r, l)
                    }
                }).add(p).bind("mouseup." + u + " touchend." + u + " pointerup." + u + " MSPointerUp." + u, function() {
                    o && (C(o, "active", d.autoExpandScrollbar), o = null), c = !1, s && (document.onselectstart = null), L.call(h, !0)
                })
            },
            D = function() {
                function o(e) {
                    if (!te(e) || c || O(e)[2]) return void(t = 0);
                    t = 1, b = 0, C = 0, d = 1, y.removeClass("mCS_touch_action");
                    var o = I.offset();
                    u = O(e)[0] - o.top, f = O(e)[1] - o.left, z = [O(e)[0], O(e)[1]]
                }

                function n(e) {
                    if (te(e) && !c && !O(e)[2] && (T.documentTouchScroll || e.preventDefault(), e.stopImmediatePropagation(), (!C || b) && d)) {
                        g = K();
                        var t = M.offset(),
                            o = O(e)[0] - t.top,
                            a = O(e)[1] - t.left,
                            n = "mcsLinearOut";
                        if (E.push(o), W.push(a), z[2] = Math.abs(O(e)[0] - z[0]), z[3] = Math.abs(O(e)[1] - z[1]), B.overflowed[0]) var i = D[0].parent().height() - D[0].height(),
                            r = u - o > 0 && o - u > -(i * B.scrollRatio.y) && (2 * z[3] < z[2] || "yx" === T.axis);
                        if (B.overflowed[1]) var l = D[1].parent().width() - D[1].width(),
                            h = f - a > 0 && a - f > -(l * B.scrollRatio.x) && (2 * z[2] < z[3] || "yx" === T.axis);
                        r || h ? (U || e.preventDefault(), b = 1) : (C = 1, y.addClass("mCS_touch_action")), U && e.preventDefault(), w = "yx" === T.axis ? [u - o, f - a] : "x" === T.axis ? [null, f - a] : [u - o, null], I[0].idleTimer = 250, B.overflowed[0] && s(w[0], R, n, "y", "all", !0), B.overflowed[1] && s(w[1], R, n, "x", L, !0)
                    }
                }

                function i(e) {
                    if (!te(e) || c || O(e)[2]) return void(t = 0);
                    t = 1, e.stopImmediatePropagation(), Q(y), p = K();
                    var o = M.offset();
                    h = O(e)[0] - o.top, m = O(e)[1] - o.left, E = [], W = []
                }

                function r(e) {
                    if (te(e) && !c && !O(e)[2]) {
                        d = 0, e.stopImmediatePropagation(), b = 0, C = 0, v = K();
                        var t = M.offset(),
                            o = O(e)[0] - t.top,
                            a = O(e)[1] - t.left;
                        if (!(v - g > 30)) {
                            _ = 1e3 / (v - p);
                            var n = "mcsEaseOut",
                                i = 2.5 > _,
                                r = i ? [E[E.length - 2], W[W.length - 2]] : [0, 0];
                            x = i ? [o - r[0], a - r[1]] : [o - h, a - m];
                            var u = [Math.abs(x[0]), Math.abs(x[1])];
                            _ = i ? [Math.abs(x[0] / 4), Math.abs(x[1] / 4)] : [_, _];
                            var f = [Math.abs(I[0].offsetTop) - x[0] * l(u[0] / _[0], _[0]), Math.abs(I[0].offsetLeft) - x[1] * l(u[1] / _[1], _[1])];
                            w = "yx" === T.axis ? [f[0], f[1]] : "x" === T.axis ? [null, f[1]] : [f[0], null], S = [4 * u[0] + T.scrollInertia, 4 * u[1] + T.scrollInertia];
                            var y = parseInt(T.contentTouchScroll) || 0;
                            w[0] = u[0] > y ? w[0] : 0, w[1] = u[1] > y ? w[1] : 0, B.overflowed[0] && s(w[0], S[0], n, "y", L, !1), B.overflowed[1] && s(w[1], S[1], n, "x", L, !1)
                        }
                    }
                }

                function l(e, t) {
                    var o = [1.5 * t, 2 * t, t / 1.5, t / 2];
                    return e > 90 ? t > 4 ? o[0] : o[3] : e > 60 ? t > 3 ? o[3] : o[2] : e > 30 ? t > 8 ? o[1] : t > 6 ? o[0] : t > 4 ? t : o[2] : t > 8 ? t : o[3]
                }

                function s(e, t, o, a, n, i) {
                    e && G(y, e.toString(), {
                        dur: t,
                        scrollEasing: o,
                        dir: a,
                        overwrite: n,
                        drag: i
                    })
                }
                var d, u, f, h, m, p, g, v, x, _, w, S, b, C, y = e(this),
                    B = y.data(a),
                    T = B.opt,
                    k = a + "_" + B.idx,
                    M = e("#mCSB_" + B.idx),
                    I = e("#mCSB_" + B.idx + "_container"),
                    D = [e("#mCSB_" + B.idx + "_dragger_vertical"), e("#mCSB_" + B.idx + "_dragger_horizontal")],
                    E = [],
                    W = [],
                    R = 0,
                    L = "yx" === T.axis ? "none" : "all",
                    z = [],
                    P = I.find("iframe"),
                    H = ["touchstart." + k + " pointerdown." + k + " MSPointerDown." + k, "touchmove." + k + " pointermove." + k + " MSPointerMove." + k, "touchend." + k + " pointerup." + k + " MSPointerUp." + k],
                    U = void 0 !== document.body.style.touchAction && "" !== document.body.style.touchAction;
                I.bind(H[0], function(e) {
                    o(e)
                }).bind(H[1], function(e) {
                    n(e)
                }), M.bind(H[0], function(e) {
                    i(e)
                }).bind(H[2], function(e) {
                    r(e)
                }), P.length && P.each(function() {
                    e(this).bind("load", function() {
                        A(this) && e(this.contentDocument || this.contentWindow.document).bind(H[0], function(e) {
                            o(e), i(e)
                        }).bind(H[1], function(e) {
                            n(e)
                        }).bind(H[2], function(e) {
                            r(e)
                        })
                    })
                })
            },
            E = function() {
                function o() {
                    return window.getSelection ? window.getSelection().toString() : document.selection && "Control" != document.selection.type ? document.selection.createRange().text : 0
                }

                function n(e, t, o) {
                    d.type = o && i ? "stepped" : "stepless", d.scrollAmount = 10, j(r, e, t, "mcsLinearOut", o ? 60 : null)
                }
                var i, r = e(this),
                    l = r.data(a),
                    s = l.opt,
                    d = l.sequential,
                    u = a + "_" + l.idx,
                    f = e("#mCSB_" + l.idx + "_container"),
                    h = f.parent();
                f.bind("mousedown." + u, function() {
                    t || i || (i = 1, c = !0)
                }).add(document).bind("mousemove." + u, function(e) {
                    if (!t && i && o()) {
                        var a = f.offset(),
                            r = O(e)[0] - a.top + f[0].offsetTop,
                            c = O(e)[1] - a.left + f[0].offsetLeft;
                        r > 0 && r < h.height() && c > 0 && c < h.width() ? d.step && n("off", null, "stepped") : ("x" !== s.axis && l.overflowed[0] && (0 > r ? n("on", 38) : r > h.height() && n("on", 40)), "y" !== s.axis && l.overflowed[1] && (0 > c ? n("on", 37) : c > h.width() && n("on", 39)))
                    }
                }).bind("mouseup." + u + " dragend." + u, function() {
                    t || (i && (i = 0, n("off", null)), c = !1)
                })
            },
            W = function() {
                function t(t, a) {
                    if (Q(o), !z(o, t.target)) {
                        var r = "auto" !== i.mouseWheel.deltaFactor ? parseInt(i.mouseWheel.deltaFactor) : s && t.deltaFactor < 100 ? 100 : t.deltaFactor || 100,
                            d = i.scrollInertia;
                        if ("x" === i.axis || "x" === i.mouseWheel.axis) var u = "x",
                            f = [Math.round(r * n.scrollRatio.x), parseInt(i.mouseWheel.scrollAmount)],
                            h = "auto" !== i.mouseWheel.scrollAmount ? f[1] : f[0] >= l.width() ? .9 * l.width() : f[0],
                            m = Math.abs(e("#mCSB_" + n.idx + "_container")[0].offsetLeft),
                            p = c[1][0].offsetLeft,
                            g = c[1].parent().width() - c[1].width(),
                            v = "y" === i.mouseWheel.axis ? t.deltaY || a : t.deltaX;
                        else var u = "y",
                            f = [Math.round(r * n.scrollRatio.y), parseInt(i.mouseWheel.scrollAmount)],
                            h = "auto" !== i.mouseWheel.scrollAmount ? f[1] : f[0] >= l.height() ? .9 * l.height() : f[0],
                            m = Math.abs(e("#mCSB_" + n.idx + "_container")[0].offsetTop),
                            p = c[0][0].offsetTop,
                            g = c[0].parent().height() - c[0].height(),
                            v = t.deltaY || a;
                        "y" === u && !n.overflowed[0] || "x" === u && !n.overflowed[1] || ((i.mouseWheel.invert || t.webkitDirectionInvertedFromDevice) && (v = -v), i.mouseWheel.normalizeDelta && (v = 0 > v ? -1 : 1), (v > 0 && 0 !== p || 0 > v && p !== g || i.mouseWheel.preventDefault) && (t.stopImmediatePropagation(), t.preventDefault()), t.deltaFactor < 5 && !i.mouseWheel.normalizeDelta && (h = t.deltaFactor, d = 17), G(o, (m - v * h).toString(), {
                            dir: u,
                            dur: d
                        }))
                    }
                }
                if (e(this).data(a)) {
                    var o = e(this),
                        n = o.data(a),
                        i = n.opt,
                        r = a + "_" + n.idx,
                        l = e("#mCSB_" + n.idx),
                        c = [e("#mCSB_" + n.idx + "_dragger_vertical"), e("#mCSB_" + n.idx + "_dragger_horizontal")],
                        d = e("#mCSB_" + n.idx + "_container").find("iframe");
                    d.length && d.each(function() {
                        e(this).bind("load", function() {
                            A(this) && e(this.contentDocument || this.contentWindow.document).bind("mousewheel." + r, function(e, o) {
                                t(e, o)
                            })
                        })
                    }), l.bind("mousewheel." + r, function(e, o) {
                        t(e, o)
                    })
                }
            },
            R = new Object,
            A = function(t) {
                var o = !1,
                    a = !1,
                    n = null;
                if (void 0 === t ? a = "#empty" : void 0 !== e(t).attr("id") && (a = e(t).attr("id")), a !== !1 && void 0 !== R[a]) return R[a];
                if (t) {
                    try {
                        var i = t.contentDocument || t.contentWindow.document;
                        n = i.body.innerHTML
                    } catch (r) {}
                    o = null !== n
                } else {
                    try {
                        var i = top.document;
                        n = i.body.innerHTML
                    } catch (r) {}
                    o = null !== n
                }
                return a !== !1 && (R[a] = o), o
            },
            L = function(e) {
                var t = this.find("iframe");
                if (t.length) {
                    var o = e ? "auto" : "none";
                    t.css("pointer-events", o)
                }
            },
            z = function(t, o) {
                var n = o.nodeName.toLowerCase(),
                    i = t.data(a).opt.mouseWheel.disableOver,
                    r = ["select", "textarea"];
                return e.inArray(n, i) > -1 && !(e.inArray(n, r) > -1 && !e(o).is(":focus"))
            },
            P = function() {
                var t, o = e(this),
                    n = o.data(a),
                    i = a + "_" + n.idx,
                    r = e("#mCSB_" + n.idx + "_container"),
                    l = r.parent(),
                    s = e(".mCSB_" + n.idx + "_scrollbar ." + d[12]);
                s.bind("mousedown." + i + " touchstart." + i + " pointerdown." + i + " MSPointerDown." + i, function(o) {
                    c = !0, e(o.target).hasClass("mCSB_dragger") || (t = 1)
                }).bind("touchend." + i + " pointerup." + i + " MSPointerUp." + i, function() {
                    c = !1
                }).bind("click." + i, function(a) {
                    if (t && (t = 0, e(a.target).hasClass(d[12]) || e(a.target).hasClass("mCSB_draggerRail"))) {
                        Q(o);
                        var i = e(this),
                            s = i.find(".mCSB_dragger");
                        if (i.parent(".mCSB_scrollTools_horizontal").length > 0) {
                            if (!n.overflowed[1]) return;
                            var c = "x",
                                u = a.pageX > s.offset().left ? -1 : 1,
                                f = Math.abs(r[0].offsetLeft) - u * (.9 * l.width())
                        } else {
                            if (!n.overflowed[0]) return;
                            var c = "y",
                                u = a.pageY > s.offset().top ? -1 : 1,
                                f = Math.abs(r[0].offsetTop) - u * (.9 * l.height())
                        }
                        G(o, f.toString(), {
                            dir: c,
                            scrollEasing: "mcsEaseInOut"
                        })
                    }
                })
            },
            H = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = a + "_" + o.idx,
                    r = e("#mCSB_" + o.idx + "_container"),
                    l = r.parent();
                r.bind("focusin." + i, function() {
                    var o = e(document.activeElement),
                        a = r.find(".mCustomScrollBox").length,
                        i = 0;
                    o.is(n.advanced.autoScrollOnFocus) && (Q(t), clearTimeout(t[0]._focusTimeout), t[0]._focusTimer = a ? (i + 17) * a : 0, t[0]._focusTimeout = setTimeout(function() {
                        var e = [ae(o)[0], ae(o)[1]],
                            a = [r[0].offsetTop, r[0].offsetLeft],
                            s = [a[0] + e[0] >= 0 && a[0] + e[0] < l.height() - o.outerHeight(!1), a[1] + e[1] >= 0 && a[0] + e[1] < l.width() - o.outerWidth(!1)],
                            c = "yx" !== n.axis || s[0] || s[1] ? "all" : "none";
                        "x" === n.axis || s[0] || G(t, e[0].toString(), {
                            dir: "y",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: c,
                            dur: i
                        }), "y" === n.axis || s[1] || G(t, e[1].toString(), {
                            dir: "x",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: c,
                            dur: i
                        })
                    }, t[0]._focusTimer))
                })
            },
            U = function() {
                var t = e(this),
                    o = t.data(a),
                    n = a + "_" + o.idx,
                    i = e("#mCSB_" + o.idx + "_container").parent();
                i.bind("scroll." + n, function() {
                    0 === i.scrollTop() && 0 === i.scrollLeft() || e(".mCSB_" + o.idx + "_scrollbar").css("visibility", "hidden")
                })
            },
            F = function() {
                var t = e(this),
                    o = t.data(a),
                    n = o.opt,
                    i = o.sequential,
                    r = a + "_" + o.idx,
                    l = ".mCSB_" + o.idx + "_scrollbar",
                    s = e(l + ">a");
                s.bind("contextmenu." + r, function(e) {
                    e.preventDefault()
                }).bind("mousedown." + r + " touchstart." + r + " pointerdown." + r + " MSPointerDown." + r + " mouseup." + r + " touchend." + r + " pointerup." + r + " MSPointerUp." + r + " mouseout." + r + " pointerout." + r + " MSPointerOut." + r + " click." + r, function(a) {
                    function r(e, o) {
                        i.scrollAmount = n.scrollButtons.scrollAmount, j(t, e, o)
                    }
                    if (a.preventDefault(), ee(a)) {
                        var l = e(this).attr("class");
                        switch (i.type = n.scrollButtons.scrollType, a.type) {
                            case "mousedown":
                            case "touchstart":
                            case "pointerdown":
                            case "MSPointerDown":
                                if ("stepped" === i.type) return;
                                c = !0, o.tweenRunning = !1, r("on", l);
                                break;
                            case "mouseup":
                            case "touchend":
                            case "pointerup":
                            case "MSPointerUp":
                            case "mouseout":
                            case "pointerout":
                            case "MSPointerOut":
                                if ("stepped" === i.type) return;
                                c = !1, i.dir && r("off", l);
                                break;
                            case "click":
                                if ("stepped" !== i.type || o.tweenRunning) return;
                                r("on", l)
                        }
                    }
                })
            },
            q = function() {
                function t(t) {
                    function a(e, t) {
                        r.type = i.keyboard.scrollType, r.scrollAmount = i.keyboard.scrollAmount, "stepped" === r.type && n.tweenRunning || j(o, e, t)
                    }
                    switch (t.type) {
                        case "blur":
                            n.tweenRunning && r.dir && a("off", null);
                            break;
                        case "keydown":
                        case "keyup":
                            var l = t.keyCode ? t.keyCode : t.which,
                                s = "on";
                            if ("x" !== i.axis && (38 === l || 40 === l) || "y" !== i.axis && (37 === l || 39 === l)) {
                                if ((38 === l || 40 === l) && !n.overflowed[0] || (37 === l || 39 === l) && !n.overflowed[1]) return;
                                "keyup" === t.type && (s = "off"), e(document.activeElement).is(u) || (t.preventDefault(), t.stopImmediatePropagation(), a(s, l))
                            } else if (33 === l || 34 === l) {
                                if ((n.overflowed[0] || n.overflowed[1]) && (t.preventDefault(), t.stopImmediatePropagation()), "keyup" === t.type) {
                                    Q(o);
                                    var f = 34 === l ? -1 : 1;
                                    if ("x" === i.axis || "yx" === i.axis && n.overflowed[1] && !n.overflowed[0]) var h = "x",
                                        m = Math.abs(c[0].offsetLeft) - f * (.9 * d.width());
                                    else var h = "y",
                                        m = Math.abs(c[0].offsetTop) - f * (.9 * d.height());
                                    G(o, m.toString(), {
                                        dir: h,
                                        scrollEasing: "mcsEaseInOut"
                                    })
                                }
                            } else if ((35 === l || 36 === l) && !e(document.activeElement).is(u) && ((n.overflowed[0] || n.overflowed[1]) && (t.preventDefault(), t.stopImmediatePropagation()), "keyup" === t.type)) {
                                if ("x" === i.axis || "yx" === i.axis && n.overflowed[1] && !n.overflowed[0]) var h = "x",
                                    m = 35 === l ? Math.abs(d.width() - c.outerWidth(!1)) : 0;
                                else var h = "y",
                                    m = 35 === l ? Math.abs(d.height() - c.outerHeight(!1)) : 0;
                                G(o, m.toString(), {
                                    dir: h,
                                    scrollEasing: "mcsEaseInOut"
                                })
                            }
                    }
                }
                var o = e(this),
                    n = o.data(a),
                    i = n.opt,
                    r = n.sequential,
                    l = a + "_" + n.idx,
                    s = e("#mCSB_" + n.idx),
                    c = e("#mCSB_" + n.idx + "_container"),
                    d = c.parent(),
                    u = "input,textarea,select,datalist,keygen,[contenteditable='true']",
                    f = c.find("iframe"),
                    h = ["blur." + l + " keydown." + l + " keyup." + l];
                f.length && f.each(function() {
                    e(this).bind("load", function() {
                        A(this) && e(this.contentDocument || this.contentWindow.document).bind(h[0], function(e) {
                            t(e)
                        })
                    })
                }), s.attr("tabindex", "0").bind(h[0], function(e) {
                    t(e)
                })
            },
            j = function(t, o, n, i, r) {
                function l(e) {
                    u.snapAmount && (f.scrollAmount = u.snapAmount instanceof Array ? "x" === f.dir[0] ? u.snapAmount[1] : u.snapAmount[0] : u.snapAmount);
                    var o = "stepped" !== f.type,
                        a = r ? r : e ? o ? p / 1.5 : g : 1e3 / 60,
                        n = e ? o ? 7.5 : 40 : 2.5,
                        s = [Math.abs(h[0].offsetTop), Math.abs(h[0].offsetLeft)],
                        d = [c.scrollRatio.y > 10 ? 10 : c.scrollRatio.y, c.scrollRatio.x > 10 ? 10 : c.scrollRatio.x],
                        m = "x" === f.dir[0] ? s[1] + f.dir[1] * (d[1] * n) : s[0] + f.dir[1] * (d[0] * n),
                        v = "x" === f.dir[0] ? s[1] + f.dir[1] * parseInt(f.scrollAmount) : s[0] + f.dir[1] * parseInt(f.scrollAmount),
                        x = "auto" !== f.scrollAmount ? v : m,
                        _ = i ? i : e ? o ? "mcsLinearOut" : "mcsEaseInOut" : "mcsLinear",
                        w = !!e;
                    return e && 17 > a && (x = "x" === f.dir[0] ? s[1] : s[0]), G(t, x.toString(), {
                        dir: f.dir[0],
                        scrollEasing: _,
                        dur: a,
                        onComplete: w
                    }), e ? void(f.dir = !1) : (clearTimeout(f.step), void(f.step = setTimeout(function() {
                        l()
                    }, a)))
                }

                function s() {
                    clearTimeout(f.step), $(f, "step"), Q(t)
                }
                var c = t.data(a),
                    u = c.opt,
                    f = c.sequential,
                    h = e("#mCSB_" + c.idx + "_container"),
                    m = "stepped" === f.type,
                    p = u.scrollInertia < 26 ? 26 : u.scrollInertia,
                    g = u.scrollInertia < 1 ? 17 : u.scrollInertia;
                switch (o) {
                    case "on":
                        if (f.dir = [n === d[16] || n === d[15] || 39 === n || 37 === n ? "x" : "y", n === d[13] || n === d[15] || 38 === n || 37 === n ? -1 : 1], Q(t), oe(n) && "stepped" === f.type) return;
                        l(m);
                        break;
                    case "off":
                        s(), (m || c.tweenRunning && f.dir) && l(!0)
                }
            },
            Y = function(t) {
                var o = e(this).data(a).opt,
                    n = [];
                return "function" == typeof t && (t = t()), t instanceof Array ? n = t.length > 1 ? [t[0], t[1]] : "x" === o.axis ? [null, t[0]] : [t[0], null] : (n[0] = t.y ? t.y : t.x || "x" === o.axis ? null : t, n[1] = t.x ? t.x : t.y || "y" === o.axis ? null : t), "function" == typeof n[0] && (n[0] = n[0]()), "function" == typeof n[1] && (n[1] = n[1]()), n
            },
            X = function(t, o) {
                if (null != t && "undefined" != typeof t) {
                    var n = e(this),
                        i = n.data(a),
                        r = i.opt,
                        l = e("#mCSB_" + i.idx + "_container"),
                        s = l.parent(),
                        c = typeof t;
                    o || (o = "x" === r.axis ? "x" : "y");
                    var d = "x" === o ? l.outerWidth(!1) - s.width() : l.outerHeight(!1) - s.height(),
                        f = "x" === o ? l[0].offsetLeft : l[0].offsetTop,
                        h = "x" === o ? "left" : "top";
                    switch (c) {
                        case "function":
                            return t();
                        case "object":
                            var m = t.jquery ? t : e(t);
                            if (!m.length) return;
                            return "x" === o ? ae(m)[1] : ae(m)[0];
                        case "string":
                        case "number":
                            if (oe(t)) return Math.abs(t);
                            if (-1 !== t.indexOf("%")) return Math.abs(d * parseInt(t) / 100);
                            if (-1 !== t.indexOf("-=")) return Math.abs(f - parseInt(t.split("-=")[1]));
                            if (-1 !== t.indexOf("+=")) {
                                var p = f + parseInt(t.split("+=")[1]);
                                return p >= 0 ? 0 : Math.abs(p)
                            }
                            if (-1 !== t.indexOf("px") && oe(t.split("px")[0])) return Math.abs(t.split("px")[0]);
                            if ("top" === t || "left" === t) return 0;
                            if ("bottom" === t) return Math.abs(s.height() - l.outerHeight(!1));
                            if ("right" === t) return Math.abs(s.width() - l.outerWidth(!1));
                            if ("first" === t || "last" === t) {
                                var m = l.find(":" + t);
                                return "x" === o ? ae(m)[1] : ae(m)[0]
                            }
                            return e(t).length ? "x" === o ? ae(e(t))[1] : ae(e(t))[0] : (l.css(h, t), void u.update.call(null, n[0]))
                    }
                }
            },
            N = function(t) {
                function o() {
                    return clearTimeout(f[0].autoUpdate), 0 === l.parents("html").length ? void(l = null) : void(f[0].autoUpdate = setTimeout(function() {
                        return c.advanced.updateOnSelectorChange && (s.poll.change.n = i(), s.poll.change.n !== s.poll.change.o) ? (s.poll.change.o = s.poll.change.n, void r(3)) : c.advanced.updateOnContentResize && (s.poll.size.n = l[0].scrollHeight + l[0].scrollWidth + f[0].offsetHeight + l[0].offsetHeight + l[0].offsetWidth, s.poll.size.n !== s.poll.size.o) ? (s.poll.size.o = s.poll.size.n, void r(1)) : !c.advanced.updateOnImageLoad || "auto" === c.advanced.updateOnImageLoad && "y" === c.axis || (s.poll.img.n = f.find("img").length, s.poll.img.n === s.poll.img.o) ? void((c.advanced.updateOnSelectorChange || c.advanced.updateOnContentResize || c.advanced.updateOnImageLoad) && o()) : (s.poll.img.o = s.poll.img.n, void f.find("img").each(function() {
                            n(this)
                        }))
                    }, c.advanced.autoUpdateTimeout))
                }

                function n(t) {
                    function o(e, t) {
                        return function() {
                            return t.apply(e, arguments)
                        }
                    }

                    function a() {
                        this.onload = null, e(t).addClass(d[2]), r(2)
                    }
                    if (e(t).hasClass(d[2])) return void r();
                    var n = new Image;
                    n.onload = o(n, a), n.src = t.src
                }

                function i() {
                    c.advanced.updateOnSelectorChange === !0 && (c.advanced.updateOnSelectorChange = "*");
                    var e = 0,
                        t = f.find(c.advanced.updateOnSelectorChange);
                    return c.advanced.updateOnSelectorChange && t.length > 0 && t.each(function() {
                        e += this.offsetHeight + this.offsetWidth
                    }), e
                }

                function r(e) {
                    clearTimeout(f[0].autoUpdate), u.update.call(null, l[0], e)
                }
                var l = e(this),
                    s = l.data(a),
                    c = s.opt,
                    f = e("#mCSB_" + s.idx + "_container");
                return t ? (clearTimeout(f[0].autoUpdate), void $(f[0], "autoUpdate")) : void o()
            },
            V = function(e, t, o) {
                return Math.round(e / t) * t - o
            },
            Q = function(t) {
                var o = t.data(a),
                    n = e("#mCSB_" + o.idx + "_container,#mCSB_" + o.idx + "_container_wrapper,#mCSB_" + o.idx + "_dragger_vertical,#mCSB_" + o.idx + "_dragger_horizontal");
                n.each(function() {
                    Z.call(this)
                })
            },
            G = function(t, o, n) {
                function i(e) {
                    return s && c.callbacks[e] && "function" == typeof c.callbacks[e]
                }

                function r() {
                    return [c.callbacks.alwaysTriggerOffsets || w >= S[0] + y, c.callbacks.alwaysTriggerOffsets || -B >= w]
                }

                function l() {
                    var e = [h[0].offsetTop, h[0].offsetLeft],
                        o = [x[0].offsetTop, x[0].offsetLeft],
                        a = [h.outerHeight(!1), h.outerWidth(!1)],
                        i = [f.height(), f.width()];
                    t[0].mcs = {
                        content: h,
                        top: e[0],
                        left: e[1],
                        draggerTop: o[0],
                        draggerLeft: o[1],
                        topPct: Math.round(100 * Math.abs(e[0]) / (Math.abs(a[0]) - i[0])),
                        leftPct: Math.round(100 * Math.abs(e[1]) / (Math.abs(a[1]) - i[1])),
                        direction: n.dir
                    }
                }
                var s = t.data(a),
                    c = s.opt,
                    d = {
                        trigger: "internal",
                        dir: "y",
                        scrollEasing: "mcsEaseOut",
                        drag: !1,
                        dur: c.scrollInertia,
                        overwrite: "all",
                        callbacks: !0,
                        onStart: !0,
                        onUpdate: !0,
                        onComplete: !0
                    },
                    n = e.extend(d, n),
                    u = [n.dur, n.drag ? 0 : n.dur],
                    f = e("#mCSB_" + s.idx),
                    h = e("#mCSB_" + s.idx + "_container"),
                    m = h.parent(),
                    p = c.callbacks.onTotalScrollOffset ? Y.call(t, c.callbacks.onTotalScrollOffset) : [0, 0],
                    g = c.callbacks.onTotalScrollBackOffset ? Y.call(t, c.callbacks.onTotalScrollBackOffset) : [0, 0];
                if (s.trigger = n.trigger, 0 === m.scrollTop() && 0 === m.scrollLeft() || (e(".mCSB_" + s.idx + "_scrollbar").css("visibility", "visible"), m.scrollTop(0).scrollLeft(0)), "_resetY" !== o || s.contentReset.y || (i("onOverflowYNone") && c.callbacks.onOverflowYNone.call(t[0]), s.contentReset.y = 1), "_resetX" !== o || s.contentReset.x || (i("onOverflowXNone") && c.callbacks.onOverflowXNone.call(t[0]), s.contentReset.x = 1), "_resetY" !== o && "_resetX" !== o) {
                    if (!s.contentReset.y && t[0].mcs || !s.overflowed[0] || (i("onOverflowY") && c.callbacks.onOverflowY.call(t[0]), s.contentReset.x = null), !s.contentReset.x && t[0].mcs || !s.overflowed[1] || (i("onOverflowX") && c.callbacks.onOverflowX.call(t[0]), s.contentReset.x = null), c.snapAmount) {
                        var v = c.snapAmount instanceof Array ? "x" === n.dir ? c.snapAmount[1] : c.snapAmount[0] : c.snapAmount;
                        o = V(o, v, c.snapOffset)
                    }
                    switch (n.dir) {
                        case "x":
                            var x = e("#mCSB_" + s.idx + "_dragger_horizontal"),
                                _ = "left",
                                w = h[0].offsetLeft,
                                S = [f.width() - h.outerWidth(!1), x.parent().width() - x.width()],
                                b = [o, 0 === o ? 0 : o / s.scrollRatio.x],
                                y = p[1],
                                B = g[1],
                                T = y > 0 ? y / s.scrollRatio.x : 0,
                                k = B > 0 ? B / s.scrollRatio.x : 0;
                            break;
                        case "y":
                            var x = e("#mCSB_" + s.idx + "_dragger_vertical"),
                                _ = "top",
                                w = h[0].offsetTop,
                                S = [f.height() - h.outerHeight(!1), x.parent().height() - x.height()],
                                b = [o, 0 === o ? 0 : o / s.scrollRatio.y],
                                y = p[0],
                                B = g[0],
                                T = y > 0 ? y / s.scrollRatio.y : 0,
                                k = B > 0 ? B / s.scrollRatio.y : 0
                    }
                    b[1] < 0 || 0 === b[0] && 0 === b[1] ? b = [0, 0] : b[1] >= S[1] ? b = [S[0], S[1]] : b[0] = -b[0], t[0].mcs || (l(), i("onInit") && c.callbacks.onInit.call(t[0])), clearTimeout(h[0].onCompleteTimeout), J(x[0], _, Math.round(b[1]), u[1], n.scrollEasing), !s.tweenRunning && (0 === w && b[0] >= 0 || w === S[0] && b[0] <= S[0]) || J(h[0], _, Math.round(b[0]), u[0], n.scrollEasing, n.overwrite, {
                        onStart: function() {
                            n.callbacks && n.onStart && !s.tweenRunning && (i("onScrollStart") && (l(), c.callbacks.onScrollStart.call(t[0])), s.tweenRunning = !0, C(x), s.cbOffsets = r())
                        },
                        onUpdate: function() {
                            n.callbacks && n.onUpdate && i("whileScrolling") && (l(), c.callbacks.whileScrolling.call(t[0]))
                        },
                        onComplete: function() {
                            if (n.callbacks && n.onComplete) {
                                "yx" === c.axis && clearTimeout(h[0].onCompleteTimeout);
                                var e = h[0].idleTimer || 0;
                                h[0].onCompleteTimeout = setTimeout(function() {
                                    i("onScroll") && (l(), c.callbacks.onScroll.call(t[0])), i("onTotalScroll") && b[1] >= S[1] - T && s.cbOffsets[0] && (l(), c.callbacks.onTotalScroll.call(t[0])), i("onTotalScrollBack") && b[1] <= k && s.cbOffsets[1] && (l(), c.callbacks.onTotalScrollBack.call(t[0])), s.tweenRunning = !1, h[0].idleTimer = 0, C(x, "hide")
                                }, e)
                            }
                        }
                    })
                }
            },
            J = function(e, t, o, a, n, i, r) {
                function l() {
                    S.stop || (x || m.call(), x = K() - v, s(), x >= S.time && (S.time = x > S.time ? x + f - (x - S.time) : x + f - 1, S.time < x + 1 && (S.time = x + 1)), S.time < a ? S.id = h(l) : g.call())
                }

                function s() {
                    a > 0 ? (S.currVal = u(S.time, _, b, a, n), w[t] = Math.round(S.currVal) + "px") : w[t] = o + "px", p.call()
                }

                function c() {
                    f = 1e3 / 60, S.time = x + f, h = window.requestAnimationFrame ? window.requestAnimationFrame : function(e) {
                        return s(), setTimeout(e, .01)
                    }, S.id = h(l)
                }

                function d() {
                    null != S.id && (window.requestAnimationFrame ? window.cancelAnimationFrame(S.id) : clearTimeout(S.id), S.id = null)
                }

                function u(e, t, o, a, n) {
                    switch (n) {
                        case "linear":
                        case "mcsLinear":
                            return o * e / a + t;
                        case "mcsLinearOut":
                            return e /= a, e--, o * Math.sqrt(1 - e * e) + t;
                        case "easeInOutSmooth":
                            return e /= a / 2, 1 > e ? o / 2 * e * e + t : (e--, -o / 2 * (e * (e - 2) - 1) + t);
                        case "easeInOutStrong":
                            return e /= a / 2, 1 > e ? o / 2 * Math.pow(2, 10 * (e - 1)) + t : (e--, o / 2 * (-Math.pow(2, -10 * e) + 2) + t);
                        case "easeInOut":
                        case "mcsEaseInOut":
                            return e /= a / 2, 1 > e ? o / 2 * e * e * e + t : (e -= 2, o / 2 * (e * e * e + 2) + t);
                        case "easeOutSmooth":
                            return e /= a, e--, -o * (e * e * e * e - 1) + t;
                        case "easeOutStrong":
                            return o * (-Math.pow(2, -10 * e / a) + 1) + t;
                        case "easeOut":
                        case "mcsEaseOut":
                        default:
                            var i = (e /= a) * e,
                                r = i * e;
                            return t + o * (.499999999999997 * r * i + -2.5 * i * i + 5.5 * r + -6.5 * i + 4 * e)
                    }
                }
                e._mTween || (e._mTween = {
                    top: {},
                    left: {}
                });
                var f, h, r = r || {},
                    m = r.onStart || function() {},
                    p = r.onUpdate || function() {},
                    g = r.onComplete || function() {},
                    v = K(),
                    x = 0,
                    _ = e.offsetTop,
                    w = e.style,
                    S = e._mTween[t];
                "left" === t && (_ = e.offsetLeft);
                var b = o - _;
                S.stop = 0, "none" !== i && d(), c()
            },
            K = function() {
                return window.performance && window.performance.now ? window.performance.now() : window.performance && window.performance.webkitNow ? window.performance.webkitNow() : Date.now ? Date.now() : (new Date).getTime()
            },
            Z = function() {
                var e = this;
                e._mTween || (e._mTween = {
                    top: {},
                    left: {}
                });
                for (var t = ["top", "left"], o = 0; o < t.length; o++) {
                    var a = t[o];
                    e._mTween[a].id && (window.requestAnimationFrame ? window.cancelAnimationFrame(e._mTween[a].id) : clearTimeout(e._mTween[a].id), e._mTween[a].id = null, e._mTween[a].stop = 1)
                }
            },
            $ = function(e, t) {
                try {
                    delete e[t]
                } catch (o) {
                    e[t] = null
                }
            },
            ee = function(e) {
                return !(e.which && 1 !== e.which)
            },
            te = function(e) {
                var t = e.originalEvent.pointerType;
                return !(t && "touch" !== t && 2 !== t)
            },
            oe = function(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            },
            ae = function(e) {
                var t = e.parents(".mCSB_container");
                return [e.offset().top - t.offset().top, e.offset().left - t.offset().left]
            },
            ne = function() {
                function e() {
                    var e = ["webkit", "moz", "ms", "o"];
                    if ("hidden" in document) return "hidden";
                    for (var t = 0; t < e.length; t++)
                        if (e[t] + "Hidden" in document) return e[t] + "Hidden";
                    return null
                }
                var t = e();
                return t ? document[t] : !1
            };
        e.fn[o] = function(t) {
            return u[t] ? u[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : u.init.apply(this, arguments)
        }, e[o] = function(t) {
            return u[t] ? u[t].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof t && t ? void e.error("Method " + t + " does not exist") : u.init.apply(this, arguments)
        }, e[o].defaults = i, window[o] = !0, e(window).bind("load", function() {
            e(n)[o](), e.extend(e.expr[":"], {
                mcsInView: e.expr[":"].mcsInView || function(t) {
                    var o, a, n = e(t),
                        i = n.parents(".mCSB_container");
                    if (i.length) return o = i.parent(), a = [i[0].offsetTop, i[0].offsetLeft], a[0] + ae(n)[0] >= 0 && a[0] + ae(n)[0] < o.height() - n.outerHeight(!1) && a[1] + ae(n)[1] >= 0 && a[1] + ae(n)[1] < o.width() - n.outerWidth(!1)
                },
                mcsInSight: e.expr[":"].mcsInSight || function(t, o, a) {
                    var n, i, r, l, s = e(t),
                        c = s.parents(".mCSB_container"),
                        d = "exact" === a[3] ? [
                            [1, 0],
                            [1, 0]
                        ] : [
                            [.9, .1],
                            [.6, .4]
                        ];
                    if (c.length) return n = [s.outerHeight(!1), s.outerWidth(!1)], r = [c[0].offsetTop + ae(s)[0], c[0].offsetLeft + ae(s)[1]], i = [c.parent()[0].offsetHeight, c.parent()[0].offsetWidth], l = [n[0] < i[0] ? d[0] : d[1], n[1] < i[1] ? d[0] : d[1]], r[0] - i[0] * l[0][0] < 0 && r[0] + n[0] - i[0] * l[0][1] >= 0 && r[1] - i[1] * l[1][0] < 0 && r[1] + n[1] - i[1] * l[1][1] >= 0
                },
                mcsOverflow: e.expr[":"].mcsOverflow || function(t) {
                    var o = e(t).data(a);
                    if (o) return o.overflowed[0] || o.overflowed[1]
                }
            })
        })
    })
});

! function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof exports ? e(require("jquery")) : e(jQuery)
}(function(m) {
    "use strict";
    var a;
    m.support.htmlMenuitem = "HTMLMenuItemElement" in window, m.support.htmlCommand = "HTMLCommandElement" in window, m.support.eventSelectstart = "onselectstart" in document.documentElement, m.ui && m.widget || (m.cleanData = (a = m.cleanData, function(e) {
        var t, n, o;
        for (o = 0; null != e[o]; o++) {
            n = e[o];
            try {
                (t = m._data(n, "events")) && t.remove && m(n).triggerHandler("remove")
            } catch (e) {}
        }
        a(e)
    }));
    var c = null,
        d = !1,
        p = m(window),
        f = 0,
        h = {},
        x = {},
        v = {},
        g = {
            selector: null,
            appendTo: null,
            trigger: "right",
            autoHide: !1,
            delay: 200,
            reposition: !0,
            hideOnSecondTrigger: !1,
            selectableSubMenu: !1,
            classNames: {
                hover: "context-menu-hover",
                disabled: "context-menu-disabled",
                visible: "context-menu-visible",
                notSelectable: "context-menu-not-selectable",
                icon: "context-menu-icon",
                iconEdit: "context-menu-icon-edit",
                iconCut: "context-menu-icon-cut",
                iconCopy: "context-menu-icon-copy",
                iconPaste: "context-menu-icon-paste",
                iconDelete: "context-menu-icon-delete",
                iconAdd: "context-menu-icon-add",
                iconQuit: "context-menu-icon-quit",
                iconLoadingClass: "context-menu-icon-loading"
            },
            determinePosition: function(e) {
                if (m.ui && m.ui.position) e.css("display", "block").position({
                    my: "center top",
                    at: "center bottom",
                    of: this,
                    offset: "0 5",
                    collision: "fit"
                }).css("display", "none");
                else {
                    var t = this.offset();
                    t.top += this.outerHeight(), t.left += this.outerWidth() / 2 - e.outerWidth() / 2, e.css(t)
                }
            },
            position: function(e, t, n) {
                var o;
                if (t || n) {
                    if ("maintain" === t && "maintain" === n) o = e.$menu.position();
                    else {
                        var a = e.$menu.offsetParent().offset();
                        o = {
                            top: n - a.top,
                            left: t - a.left
                        }
                    }
                    var s = p.scrollTop() + p.height(),
                        i = p.scrollLeft() + p.width(),
                        c = e.$menu.outerHeight(),
                        l = e.$menu.outerWidth();
                    o.top + c > s && (o.top -= c), o.top < 0 && (o.top = 0), o.left + l > i && (o.left -= l), o.left < 0 && (o.left = 0), e.$menu.css(o)
                } else e.determinePosition.call(this, e.$menu)
            },
            positionSubmenu: function(e) {
                if (void 0 !== e)
                    if (m.ui && m.ui.position) e.css("display", "block").position({
                        my: "left top-5",
                        at: "right top",
                        of: this,
                        collision: "flipfit fit"
                    }).css("display", "");
                    else {
                        var t = {
                            top: -9,
                            left: this.outerWidth() - 5
                        };
                        e.css(t)
                    }
            },
            zIndex: 1,
            animation: {
                duration: 50,
                show: "slideDown",
                hide: "slideUp"
            },
            events: {
                preShow: m.noop,
                show: m.noop,
                hide: m.noop,
                activated: m.noop
            },
            callback: null,
            items: {}
        },
        s = {
            timer: null,
            pageX: null,
            pageY: null
        },
        b = {
            abortevent: function(e) {
                e.preventDefault(), e.stopImmediatePropagation()
            },
            contextmenu: function(e) {
                var t = m(this);
                if (!1 !== e.data.events.preShow(t, e) && ("right" === e.data.trigger && (e.preventDefault(), e.stopImmediatePropagation()), !("right" !== e.data.trigger && "demand" !== e.data.trigger && e.originalEvent || !(void 0 === e.mouseButton || !e.data || "left" === e.data.trigger && 0 === e.mouseButton || "right" === e.data.trigger && 2 === e.mouseButton) || t.hasClass("context-menu-active") || t.hasClass("context-menu-disabled")))) {
                    if (c = t, e.data.build) {
                        var n = e.data.build(c, e);
                        if (!1 === n) return;
                        if (e.data = m.extend(!0, {}, g, e.data, n || {}), !e.data.items || m.isEmptyObject(e.data.items)) throw window.console && (console.error || console.log).call(console, "No items specified to show in contextMenu"), new Error("No Items specified");
                        e.data.$trigger = c, $.create(e.data)
                    }
                    $.show.call(t, e.data, e.pageX, e.pageY)
                }
            },
            click: function(e) {
                e.preventDefault(), e.stopImmediatePropagation(), m(this).trigger(m.Event("contextmenu", {
                    data: e.data,
                    pageX: e.pageX,
                    pageY: e.pageY
                }))
            },
            mousedown: function(e) {
                var t = m(this);
                c && c.length && !c.is(t) && c.data("contextMenu").$menu.trigger("contextmenu:hide"), 2 === e.button && (c = t.data("contextMenuActive", !0))
            },
            mouseup: function(e) {
                var t = m(this);
                t.data("contextMenuActive") && c && c.length && c.is(t) && !t.hasClass("context-menu-disabled") && (e.preventDefault(), e.stopImmediatePropagation(), (c = t).trigger(m.Event("contextmenu", {
                    data: e.data,
                    pageX: e.pageX,
                    pageY: e.pageY
                }))), t.removeData("contextMenuActive")
            },
            mouseenter: function(e) {
                var t = m(this),
                    n = m(e.relatedTarget),
                    o = m(document);
                n.is(".context-menu-list") || n.closest(".context-menu-list").length || c && c.length || (s.pageX = e.pageX, s.pageY = e.pageY, s.data = e.data, o.on("mousemove.contextMenuShow", b.mousemove), s.timer = setTimeout(function() {
                    s.timer = null, o.off("mousemove.contextMenuShow"), (c = t).trigger(m.Event("contextmenu", {
                        data: s.data,
                        pageX: s.pageX,
                        pageY: s.pageY
                    }))
                }, e.data.delay))
            },
            mousemove: function(e) {
                s.pageX = e.pageX, s.pageY = e.pageY
            },
            mouseleave: function(e) {
                var t = m(e.relatedTarget);
                if (!t.is(".context-menu-list") && !t.closest(".context-menu-list").length) {
                    try {
                        clearTimeout(s.timer)
                    } catch (e) {}
                    s.timer = null
                }
            },
            layerClick: function(a) {
                var s, i, c = m(this).data("contextMenuRoot"),
                    l = a.button,
                    r = a.pageX,
                    u = a.pageY,
                    d = void 0 === r;
                a.preventDefault(), setTimeout(function() {
                    if (d) null != c && null !== c.$menu && void 0 !== c.$menu && c.$menu.trigger("contextmenu:hide");
                    else {
                        var e, t = "left" === c.trigger && 0 === l || "right" === c.trigger && 2 === l;
                        if (document.elementFromPoint && c.$layer) {
                            if (c.$layer.hide(), (s = document.elementFromPoint(r - p.scrollLeft(), u - p.scrollTop())).isContentEditable) {
                                var n = document.createRange(),
                                    o = window.getSelection();
                                n.selectNode(s), n.collapse(!0), o.removeAllRanges(), o.addRange(n)
                            }
                            m(s).trigger(a), c.$layer.show()
                        }
                        if (c.hideOnSecondTrigger && t && null !== c.$menu && void 0 !== c.$menu) c.$menu.trigger("contextmenu:hide");
                        else {
                            if (c.reposition && t)
                                if (document.elementFromPoint) {
                                    if (c.$trigger.is(s)) return void c.position.call(c.$trigger, c, r, u)
                                } else if (i = c.$trigger.offset(), e = m(window), i.top += e.scrollTop(), i.top <= a.pageY && (i.left += e.scrollLeft(), i.left <= a.pageX && (i.bottom = i.top + c.$trigger.outerHeight(), i.bottom >= a.pageY && (i.right = i.left + c.$trigger.outerWidth(), i.right >= a.pageX)))) return void c.position.call(c.$trigger, c, r, u);
                            s && t && c.$trigger.one("contextmenu:hidden", function() {
                                m(s).contextMenu({
                                    x: r,
                                    y: u,
                                    button: l
                                })
                            }), null != c && null !== c.$menu && void 0 !== c.$menu && c.$menu.trigger("contextmenu:hide")
                        }
                    }
                }, 50)
            },
            keyStop: function(e, t) {
                t.isInput || e.preventDefault(), e.stopPropagation()
            },
            key: function(e) {
                var t = {};
                c && (t = c.data("contextMenu") || {}), void 0 === t.zIndex && (t.zIndex = 0);
                var n = 0,
                    o = function(e) {
                        "" !== e.style.zIndex ? n = e.style.zIndex : null !== e.offsetParent && void 0 !== e.offsetParent ? o(e.offsetParent) : null !== e.parentElement && void 0 !== e.parentElement && o(e.parentElement)
                    };
                if (o(e.target), !(t.$menu && parseInt(n, 10) > parseInt(t.$menu.css("zIndex"), 10))) {
                    switch (e.keyCode) {
                        case 9:
                        case 38:
                            if (b.keyStop(e, t), t.isInput) {
                                if (9 === e.keyCode && e.shiftKey) return e.preventDefault(), t.$selected && t.$selected.find("input, textarea, select").blur(), void(null !== t.$menu && void 0 !== t.$menu && t.$menu.trigger("prevcommand"));
                                if (38 === e.keyCode && "checkbox" === t.$selected.find("input, textarea, select").prop("type")) return void e.preventDefault()
                            } else if (9 !== e.keyCode || e.shiftKey) return void(null !== t.$menu && void 0 !== t.$menu && t.$menu.trigger("prevcommand"));
                            break;
                        case 40:
                            if (b.keyStop(e, t), !t.isInput) return void(null !== t.$menu && void 0 !== t.$menu && t.$menu.trigger("nextcommand"));
                            if (9 === e.keyCode) return e.preventDefault(), t.$selected && t.$selected.find("input, textarea, select").blur(), void(null !== t.$menu && void 0 !== t.$menu && t.$menu.trigger("nextcommand"));
                            if (40 === e.keyCode && "checkbox" === t.$selected.find("input, textarea, select").prop("type")) return void e.preventDefault();
                            break;
                        case 37:
                            if (b.keyStop(e, t), t.isInput || !t.$selected || !t.$selected.length) break;
                            if (t.$selected.parent().hasClass("context-menu-root")) break;
                            var a = t.$selected.parent().parent();
                            return t.$selected.trigger("contextmenu:blur"), void(t.$selected = a);
                        case 39:
                            if (b.keyStop(e, t), t.isInput || !t.$selected || !t.$selected.length) break;
                            var s = t.$selected.data("contextMenu") || {};
                            if (s.$menu && t.$selected.hasClass("context-menu-submenu")) return t.$selected = null, s.$selected = null, void s.$menu.trigger("nextcommand");
                            break;
                        case 35:
                        case 36:
                            return t.$selected && t.$selected.find("input, textarea, select").length ? void 0 : ((t.$selected && t.$selected.parent() || t.$menu).children(":not(." + t.classNames.disabled + ", ." + t.classNames.notSelectable + ")")[36 === e.keyCode ? "first" : "last"]().trigger("contextmenu:focus"), void e.preventDefault());
                        case 13:
                            if (b.keyStop(e, t), t.isInput) {
                                if (t.$selected && !t.$selected.is("textarea, select")) return void e.preventDefault();
                                break
                            }
                            return void(void 0 !== t.$selected && null !== t.$selected && t.$selected.trigger("mouseup"));
                        case 32:
                        case 33:
                        case 34:
                            return void b.keyStop(e, t);
                        case 27:
                            return b.keyStop(e, t), void(null !== t.$menu && void 0 !== t.$menu && t.$menu.trigger("contextmenu:hide"));
                        default:
                            var i = String.fromCharCode(e.keyCode).toUpperCase();
                            if (t.accesskeys && t.accesskeys[i]) return void t.accesskeys[i].$node.trigger(t.accesskeys[i].$menu ? "contextmenu:focus" : "mouseup")
                    }
                    e.stopPropagation(), void 0 !== t.$selected && null !== t.$selected && t.$selected.trigger(e)
                }
            },
            prevItem: function(e) {
                e.stopPropagation();
                var t = m(this).data("contextMenu") || {},
                    n = m(this).data("contextMenuRoot") || {};
                if (t.$selected) {
                    var o = t.$selected;
                    (t = t.$selected.parent().data("contextMenu") || {}).$selected = o
                }
                for (var a = t.$menu.children(), s = t.$selected && t.$selected.prev().length ? t.$selected.prev() : a.last(), i = s; s.hasClass(n.classNames.disabled) || s.hasClass(n.classNames.notSelectable) || s.is(":hidden");)
                    if ((s = s.prev().length ? s.prev() : a.last()).is(i)) return;
                t.$selected && b.itemMouseleave.call(t.$selected.get(0), e), b.itemMouseenter.call(s.get(0), e);
                var c = s.find("input, textarea, select");
                c.length && c.focus()
            },
            nextItem: function(e) {
                e.stopPropagation();
                var t = m(this).data("contextMenu") || {},
                    n = m(this).data("contextMenuRoot") || {};
                if (t.$selected) {
                    var o = t.$selected;
                    (t = t.$selected.parent().data("contextMenu") || {}).$selected = o
                }
                for (var a = t.$menu.children(), s = t.$selected && t.$selected.next().length ? t.$selected.next() : a.first(), i = s; s.hasClass(n.classNames.disabled) || s.hasClass(n.classNames.notSelectable) || s.is(":hidden");)
                    if ((s = s.next().length ? s.next() : a.first()).is(i)) return;
                t.$selected && b.itemMouseleave.call(t.$selected.get(0), e), b.itemMouseenter.call(s.get(0), e);
                var c = s.find("input, textarea, select");
                c.length && c.focus()
            },
            focusInput: function() {
                var e = m(this).closest(".context-menu-item"),
                    t = e.data(),
                    n = t.contextMenu,
                    o = t.contextMenuRoot;
                o.$selected = n.$selected = e, o.isInput = n.isInput = !0
            },
            blurInput: function() {
                var e = m(this).closest(".context-menu-item").data(),
                    t = e.contextMenu;
                e.contextMenuRoot.isInput = t.isInput = !1
            },
            menuMouseenter: function() {
                m(this).data().contextMenuRoot.hovering = !0
            },
            menuMouseleave: function(e) {
                var t = m(this).data().contextMenuRoot;
                t.$layer && t.$layer.is(e.relatedTarget) && (t.hovering = !1)
            },
            itemMouseenter: function(e) {
                var t = m(this),
                    n = t.data(),
                    o = n.contextMenu,
                    a = n.contextMenuRoot;
                a.hovering = !0, e && a.$layer && a.$layer.is(e.relatedTarget) && (e.preventDefault(), e.stopImmediatePropagation()), (o.$menu ? o : a).$menu.children("." + a.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur"), t.hasClass(a.classNames.disabled) || t.hasClass(a.classNames.notSelectable) ? o.$selected = null : t.trigger("contextmenu:focus")
            },
            itemMouseleave: function(e) {
                var t = m(this),
                    n = t.data(),
                    o = n.contextMenu,
                    a = n.contextMenuRoot;
                if (a !== o && a.$layer && a.$layer.is(e.relatedTarget)) return void 0 !== a.$selected && null !== a.$selected && a.$selected.trigger("contextmenu:blur"), e.preventDefault(), e.stopImmediatePropagation(), void(a.$selected = o.$selected = o.$node);
                o && o.$menu && o.$menu.hasClass("context-menu-visible") || t.trigger("contextmenu:blur")
            },
            itemClick: function(e) {
                var t, n = m(this),
                    o = n.data(),
                    a = o.contextMenu,
                    s = o.contextMenuRoot,
                    i = o.contextMenuKey;
                if (!(!a.items[i] || n.is("." + s.classNames.disabled + ", .context-menu-separator, ." + s.classNames.notSelectable) || n.is(".context-menu-submenu") && !1 === s.selectableSubMenu)) {
                    if (e.preventDefault(), e.stopImmediatePropagation(), m.isFunction(a.callbacks[i]) && Object.prototype.hasOwnProperty.call(a.callbacks, i)) t = a.callbacks[i];
                    else {
                        if (!m.isFunction(s.callback)) return;
                        t = s.callback
                    }!1 !== t.call(s.$trigger, i, s, e) ? s.$menu.trigger("contextmenu:hide") : s.$menu.parent().length && $.update.call(s.$trigger, s)
                }
            },
            inputClick: function(e) {
                e.stopImmediatePropagation()
            },
            hideMenu: function(e, t) {
                var n = m(this).data("contextMenuRoot");
                $.hide.call(n.$trigger, n, t && t.force)
            },
            focusItem: function(e) {
                e.stopPropagation();
                var t = m(this),
                    n = t.data(),
                    o = n.contextMenu,
                    a = n.contextMenuRoot;
                t.hasClass(a.classNames.disabled) || t.hasClass(a.classNames.notSelectable) || (t.addClass([a.classNames.hover, a.classNames.visible].join(" ")).parent().find(".context-menu-item").not(t).removeClass(a.classNames.visible).filter("." + a.classNames.hover).trigger("contextmenu:blur"), o.$selected = a.$selected = t, o && o.$node && o.$node.hasClass("context-menu-submenu") && o.$node.addClass(a.classNames.hover), o.$node && a.positionSubmenu.call(o.$node, o.$menu))
            },
            blurItem: function(e) {
                e.stopPropagation();
                var t = m(this),
                    n = t.data(),
                    o = n.contextMenu,
                    a = n.contextMenuRoot;
                o.autoHide && t.removeClass(a.classNames.visible), t.removeClass(a.classNames.hover), o.$selected = null
            }
        },
        $ = {
            show: function(n, e, t) {
                var o = m(this),
                    a = {};
                if (m("#context-menu-layer").trigger("mousedown"), n.$trigger = o, !1 !== n.events.show.call(o, n))
                    if (!1 !== $.update.call(o, n)) {
                        if (n.position.call(o, n, e, t), n.zIndex) {
                            var s = n.zIndex;
                            "function" == typeof n.zIndex && (s = n.zIndex.call(o, n)), a.zIndex = function(e) {
                                for (var t = 0, n = e; t = Math.max(t, parseInt(n.css("z-index"), 10) || 0), (n = n.parent()) && n.length && !(-1 < "html body".indexOf(n.prop("nodeName").toLowerCase())););
                                return t
                            }(o) + s
                        }
                        $.layer.call(n.$menu, n, a.zIndex), n.$menu.find("ul").css("zIndex", a.zIndex + 1), n.$menu.css(a)[n.animation.show](n.animation.duration, function() {
                            o.trigger("contextmenu:visible"), $.activated(n), n.events.activated(n)
                        }), o.data("contextMenu", n).addClass("context-menu-active"), m(document).off("keydown.contextMenu").on("keydown.contextMenu", b.key), n.autoHide && m(document).on("mousemove.contextMenuAutoHide", function(e) {
                            var t = o.offset();
                            t.right = t.left + o.outerWidth(), t.bottom = t.top + o.outerHeight(), !n.$layer || n.hovering || e.pageX >= t.left && e.pageX <= t.right && e.pageY >= t.top && e.pageY <= t.bottom || setTimeout(function() {
                                n.hovering || null === n.$menu || void 0 === n.$menu || n.$menu.trigger("contextmenu:hide")
                            }, 50)
                        })
                    } else c = null;
                else c = null
            },
            hide: function(t, e) {
                var n = m(this);
                if (t || (t = n.data("contextMenu") || {}), e || !t.events || !1 !== t.events.hide.call(n, t)) {
                    if (n.removeData("contextMenu").removeClass("context-menu-active"), t.$layer) {
                        setTimeout((o = t.$layer, function() {
                            o.remove()
                        }), 10);
                        try {
                            delete t.$layer
                        } catch (e) {
                            t.$layer = null
                        }
                    }
                    var o;
                    c = null, t.$menu.find("." + t.classNames.hover).trigger("contextmenu:blur"), t.$selected = null, t.$menu.find("." + t.classNames.visible).removeClass(t.classNames.visible), m(document).off(".contextMenuAutoHide").off("keydown.contextMenu"), t.$menu && t.$menu[t.animation.hide](t.animation.duration, function() {
                        t.build && (t.$menu.remove(), m.each(t, function(e) {
                            switch (e) {
                                case "ns":
                                case "selector":
                                case "build":
                                case "trigger":
                                    return !0;
                                default:
                                    t[e] = void 0;
                                    try {
                                        delete t[e]
                                    } catch (e) {}
                                    return !0
                            }
                        })), setTimeout(function() {
                            n.trigger("contextmenu:hidden")
                        }, 10)
                    })
                }
            },
            create: function(r, u) {
                function d(e) {
                    var t = m("<span></span>");
                    if (e._accesskey) e._beforeAccesskey && t.append(document.createTextNode(e._beforeAccesskey)), m("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(t), e._afterAccesskey && t.append(document.createTextNode(e._afterAccesskey));
                    else if (e.isHtmlName) {
                        if (void 0 !== e.accesskey) throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");
                        t.html(e.name)
                    } else t.text(e.name);
                    return t
                }
                void 0 === u && (u = r), r.$menu = m('<ul class="context-menu-list"></ul>').addClass(r.className || "").data({
                    contextMenu: r,
                    contextMenuRoot: u
                }), m.each(["callbacks", "commands", "inputs"], function(e, t) {
                    r[t] = {}, u[t] || (u[t] = {})
                }), u.accesskeys || (u.accesskeys = {}), m.each(r.items, function(n, o) {
                    var e = m('<li class="context-menu-item"></li>').addClass(o.className || ""),
                        t = null,
                        a = null;
                    if (e.on("click", m.noop), "string" != typeof o && "cm_separator" !== o.type || (o = {
                            type: "cm_seperator"
                        }), o.$node = e.data({
                            contextMenu: r,
                            contextMenuRoot: u,
                            contextMenuKey: n
                        }), void 0 !== o.accesskey)
                        for (var s, i = function(e) {
                                for (var t, n = e.split(/\s+/), o = [], a = 0; t = n[a]; a++) t = t.charAt(0).toUpperCase(), o.push(t);
                                return o
                            }(o.accesskey), c = 0; s = i[c]; c++)
                            if (!u.accesskeys[s]) {
                                var l = (u.accesskeys[s] = o).name.match(new RegExp("^(.*?)(" + s + ")(.*)$", "i"));
                                l && (o._beforeAccesskey = l[1], o._accesskey = l[2], o._afterAccesskey = l[3]);
                                break
                            }
                    if (o.type && v[o.type]) v[o.type].call(e, o, r, u), m.each([r, u], function(e, t) {
                        t.commands[n] = o, !m.isFunction(o.callback) || void 0 !== t.callbacks[n] && void 0 !== r.type || (t.callbacks[n] = o.callback)
                    });
                    else {
                        switch ("cm_seperator" === o.type ? e.addClass("context-menu-separator " + u.classNames.notSelectable) : "html" === o.type ? e.addClass("context-menu-html " + u.classNames.notSelectable) : "sub" !== o.type && o.type ? (t = m("<label></label>").appendTo(e), d(o).appendTo(t), e.addClass("context-menu-input"), r.hasTypes = !0, m.each([r, u], function(e, t) {
                            t.commands[n] = o, t.inputs[n] = o
                        })) : o.items && (o.type = "sub"), o.type) {
                            case "cm_seperator":
                                break;
                            case "text":
                                a = m('<input type="text" value="1" name="" />').attr("name", "context-menu-input-" + n).val(o.value || "").appendTo(t);
                                break;
                            case "textarea":
                                a = m('<textarea name=""></textarea>').attr("name", "context-menu-input-" + n).val(o.value || "").appendTo(t), o.height && a.height(o.height);
                                break;
                            case "checkbox":
                                a = m('<input type="checkbox" value="1" name="" />').attr("name", "context-menu-input-" + n).val(o.value || "").prop("checked", !!o.selected).prependTo(t);
                                break;
                            case "radio":
                                a = m('<input type="radio" value="1" name="" />').attr("name", "context-menu-input-" + o.radio).val(o.value || "").prop("checked", !!o.selected).prependTo(t);
                                break;
                            case "select":
                                a = m('<select name=""></select>').attr("name", "context-menu-input-" + n).appendTo(t), o.options && (m.each(o.options, function(e, t) {
                                    m("<option></option>").val(e).text(t).appendTo(a)
                                }), a.val(o.selected));
                                break;
                            case "sub":
                                d(o).appendTo(e), o.appendTo = o.$node, e.data("contextMenu", o).addClass("context-menu-submenu"), o.callback = null, "function" == typeof o.items.then ? $.processPromises(o, u, o.items) : $.create(o, u);
                                break;
                            case "html":
                                m(o.html).appendTo(e);
                                break;
                            default:
                                m.each([r, u], function(e, t) {
                                    t.commands[n] = o, !m.isFunction(o.callback) || void 0 !== t.callbacks[n] && void 0 !== r.type || (t.callbacks[n] = o.callback)
                                }), d(o).appendTo(e)
                        }
                        o.type && "sub" !== o.type && "html" !== o.type && "cm_seperator" !== o.type && (a.on("focus", b.focusInput).on("blur", b.blurInput), o.events && a.on(o.events, r)), o.icon && (m.isFunction(o.icon) ? o._icon = o.icon.call(this, this, e, n, o) : "string" != typeof o.icon || "fab " !== o.icon.substring(0, 4) && "fas " !== o.icon.substring(0, 4) && "far " !== o.icon.substring(0, 4) && "fal " !== o.icon.substring(0, 4) ? "string" == typeof o.icon && "fa-" === o.icon.substring(0, 3) ? o._icon = u.classNames.icon + " " + u.classNames.icon + "--fa fa " + o.icon : o._icon = u.classNames.icon + " " + u.classNames.icon + "-" + o.icon : (e.addClass(u.classNames.icon + " " + u.classNames.icon + "--fa5"), o._icon = m('<i class="' + o.icon + '"></i>')), "string" == typeof o._icon ? e.addClass(o._icon) : e.prepend(o._icon))
                    }
                    o.$input = a, o.$label = t, e.appendTo(r.$menu), !r.hasTypes && m.support.eventSelectstart && e.on("selectstart.disableTextSelect", b.abortevent)
                }), r.$node || r.$menu.css("display", "none").addClass("context-menu-root"), r.$menu.appendTo(r.appendTo || document.body)
            },
            resize: function(e, t) {
                var n;
                e.css({
                    position: "absolute",
                    display: "block"
                }), e.data("width", (n = e.get(0)).getBoundingClientRect ? Math.ceil(n.getBoundingClientRect().width) : e.outerWidth() + 1), e.css({
                    position: "static",
                    minWidth: "0px",
                    maxWidth: "100000px"
                }), e.find("> li > ul").each(function() {
                    $.resize(m(this), !0)
                }), t || e.find("ul").addBack().css({
                    position: "",
                    display: "",
                    minWidth: "",
                    maxWidth: ""
                }).outerWidth(function() {
                    return m(this).data("width")
                })
            },
            update: function(i, c) {
                var l = this;
                void 0 === c && (c = i, $.resize(i.$menu));
                var r = !1;
                return i.$menu.children().each(function() {
                    var e, t = m(this),
                        n = t.data("contextMenuKey"),
                        o = i.items[n],
                        a = m.isFunction(o.disabled) && o.disabled.call(l, n, c) || !0 === o.disabled;
                    if ((e = m.isFunction(o.visible) ? o.visible.call(l, n, c) : void 0 === o.visible || !0 === o.visible) && (r = !0), t[e ? "show" : "hide"](), t[a ? "addClass" : "removeClass"](c.classNames.disabled), m.isFunction(o.icon)) {
                        t.removeClass(o._icon);
                        var s = o.icon.call(this, l, t, n, o);
                        "string" == typeof s ? t.addClass(s) : t.prepend(s)
                    }
                    if (o.type) switch (t.find("input, select, textarea").prop("disabled", a), o.type) {
                        case "text":
                        case "textarea":
                            o.$input.val(o.value || "");
                            break;
                        case "checkbox":
                        case "radio":
                            o.$input.val(o.value || "").prop("checked", !!o.selected);
                            break;
                        case "select":
                            o.$input.val((0 === o.selected ? "0" : o.selected) || "")
                    }
                    o.$menu && ($.update.call(l, o, c) && (r = !0))
                }), r
            },
            layer: function(e, t) {
                var n = e.$layer = m('<div id="context-menu-layer"></div>').css({
                    height: p.height(),
                    width: p.width(),
                    display: "block",
                    position: "fixed",
                    "z-index": t,
                    top: 0,
                    left: 0,
                    opacity: 0,
                    filter: "alpha(opacity=0)",
                    "background-color": "#000"
                }).data("contextMenuRoot", e).insertBefore(this).on("contextmenu", b.abortevent).on("mousedown", b.layerClick);
                return void 0 === document.body.style.maxWidth && n.css({
                    position: "absolute",
                    height: m(document).height()
                }), n
            },
            processPromises: function(e, t, n) {
                function o(e, t, n) {
                    void 0 === n ? (n = {
                        error: {
                            name: "No items and no error item",
                            icon: "context-menu-icon context-menu-icon-quit"
                        }
                    }, window.console && (console.error || console.log).call(console, 'When you reject a promise, provide an "items" object, equal to normal sub-menu items')) : "string" == typeof n && (n = {
                        error: {
                            name: n
                        }
                    }), a(e, t, n)
                }

                function a(e, t, n) {
                    void 0 !== t.$menu && t.$menu.is(":visible") && (e.$node.removeClass(t.classNames.iconLoadingClass), e.items = n, $.create(e, t, !0), $.update(e, t), t.positionSubmenu.call(e.$node, e.$menu))
                }
                e.$node.addClass(t.classNames.iconLoadingClass), n.then(function(e, t, n) {
                    void 0 === n && o(void 0), a(e, t, n)
                }.bind(this, e, t), o.bind(this, e, t))
            },
            activated: function(e) {
                var t = e.$menu,
                    n = t.offset(),
                    o = m(window).height(),
                    a = m(window).scrollTop(),
                    s = t.height();
                o < s ? t.css({
                    height: o + "px",
                    "overflow-x": "hidden",
                    "overflow-y": "auto",
                    top: a + "px"
                }) : (n.top < a || n.top + s > a + o) && t.css({
                    top: a + "px"
                })
            }
        };

    function l(e) {
        return e.id && m('label[for="' + e.id + '"]').val() || e.name
    }
    m.fn.contextMenu = function(e) {
        var t = this,
            n = e;
        if (0 < this.length)
            if (void 0 === e) this.first().trigger("contextmenu");
            else if (void 0 !== e.x && void 0 !== e.y) this.first().trigger(m.Event("contextmenu", {
            pageX: e.x,
            pageY: e.y,
            mouseButton: e.button
        }));
        else if ("hide" === e) {
            var o = this.first().data("contextMenu") ? this.first().data("contextMenu").$menu : null;
            o && o.trigger("contextmenu:hide")
        } else "destroy" === e ? m.contextMenu("destroy", {
            context: this
        }) : m.isPlainObject(e) ? (e.context = this, m.contextMenu("create", e)) : e ? this.removeClass("context-menu-disabled") : e || this.addClass("context-menu-disabled");
        else m.each(x, function() {
            this.selector === t.selector && (n.data = this, m.extend(n.data, {
                trigger: "demand"
            }))
        }), b.contextmenu.call(n.target, n);
        return this
    }, m.contextMenu = function(e, t) {
        "string" != typeof e && (t = e, e = "create"), "string" == typeof t ? t = {
            selector: t
        } : void 0 === t && (t = {});
        var n = m.extend(!0, {}, g, t || {}),
            o = m(document),
            a = o,
            s = !1;
        switch (n.context && n.context.length ? (a = m(n.context).first(), n.context = a.get(0), s = !m(n.context).is(document)) : n.context = document, e) {
            case "update":
                if (s) $.update(a);
                else
                    for (var i in x) x.hasOwnProperty(i) && $.update(x[i]);
                break;
            case "create":
                if (!n.selector) throw new Error("No selector specified");
                if (n.selector.match(/.context-menu-(list|item|input)($|\s)/)) throw new Error('Cannot bind to selector "' + n.selector + '" as it contains a reserved className');
                if (!n.build && (!n.items || m.isEmptyObject(n.items))) throw new Error("No Items specified");
                if (f++, n.ns = ".contextMenu" + f, s || (h[n.selector] = n.ns), (x[n.ns] = n).trigger || (n.trigger = "right"), !d) {
                    var c = "click" === n.itemClickEvent ? "click.contextMenu" : "mouseup.contextMenu",
                        l = {
                            "contextmenu:focus.contextMenu": b.focusItem,
                            "contextmenu:blur.contextMenu": b.blurItem,
                            "contextmenu.contextMenu": b.abortevent,
                            "mouseenter.contextMenu": b.itemMouseenter,
                            "mouseleave.contextMenu": b.itemMouseleave
                        };
                    l[c] = b.itemClick, o.on({
                        "contextmenu:hide.contextMenu": b.hideMenu,
                        "prevcommand.contextMenu": b.prevItem,
                        "nextcommand.contextMenu": b.nextItem,
                        "contextmenu.contextMenu": b.abortevent,
                        "mouseenter.contextMenu": b.menuMouseenter,
                        "mouseleave.contextMenu": b.menuMouseleave
                    }, ".context-menu-list").on("mouseup.contextMenu", ".context-menu-input", b.inputClick).on(l, ".context-menu-item"), d = !0
                }
                switch (a.on("contextmenu" + n.ns, n.selector, n, b.contextmenu), s && a.on("remove" + n.ns, function() {
                    m(this).contextMenu("destroy")
                }), n.trigger) {
                    case "hover":
                        a.on("mouseenter" + n.ns, n.selector, n, b.mouseenter).on("mouseleave" + n.ns, n.selector, n, b.mouseleave);
                        break;
                    case "left":
                        a.on("click" + n.ns, n.selector, n, b.click);
                        break;
                    case "touchstart":
                        a.on("touchstart" + n.ns, n.selector, n, b.click)
                }
                n.build || $.create(n);
                break;
            case "destroy":
                var r;
                if (s) {
                    var u = n.context;
                    m.each(x, function(e, t) {
                        if (!t) return !0;
                        if (!m(u).is(t.selector)) return !0;
                        (r = m(".context-menu-list").filter(":visible")).length && r.data().contextMenuRoot.$trigger.is(m(t.context).find(t.selector)) && r.trigger("contextmenu:hide", {
                            force: !0
                        });
                        try {
                            x[t.ns].$menu && x[t.ns].$menu.remove(), delete x[t.ns]
                        } catch (e) {
                            x[t.ns] = null
                        }
                        return m(t.context).off(t.ns), !0
                    })
                } else if (n.selector) {
                    if (h[n.selector]) {
                        (r = m(".context-menu-list").filter(":visible")).length && r.data().contextMenuRoot.$trigger.is(n.selector) && r.trigger("contextmenu:hide", {
                            force: !0
                        });
                        try {
                            x[h[n.selector]].$menu && x[h[n.selector]].$menu.remove(), delete x[h[n.selector]]
                        } catch (e) {
                            x[h[n.selector]] = null
                        }
                        o.off(h[n.selector])
                    }
                } else o.off(".contextMenu .contextMenuAutoHide"), m.each(x, function(e, t) {
                    m(t.context).off(t.ns)
                }), h = {}, f = 0, d = !(x = {}), m("#context-menu-layer, .context-menu-list").remove();
                break;
            case "html5":
                (!m.support.htmlCommand && !m.support.htmlMenuitem || "boolean" == typeof t && t) && m('menu[type="context"]').each(function() {
                    this.id && m.contextMenu({
                        selector: "[contextmenu=" + this.id + "]",
                        items: m.contextMenu.fromMenu(this)
                    })
                }).css("display", "none");
                break;
            default:
                throw new Error('Unknown operation "' + e + '"')
        }
        return this
    }, m.contextMenu.setInputValues = function(e, n) {
        void 0 === n && (n = {}), m.each(e.inputs, function(e, t) {
            switch (t.type) {
                case "text":
                case "textarea":
                    t.value = n[e] || "";
                    break;
                case "checkbox":
                    t.selected = !!n[e];
                    break;
                case "radio":
                    t.selected = (n[t.radio] || "") === t.value;
                    break;
                case "select":
                    t.selected = n[e] || ""
            }
        })
    }, m.contextMenu.getInputValues = function(e, n) {
        return void 0 === n && (n = {}), m.each(e.inputs, function(e, t) {
            switch (t.type) {
                case "text":
                case "textarea":
                case "select":
                    n[e] = t.$input.val();
                    break;
                case "checkbox":
                    n[e] = t.$input.prop("checked");
                    break;
                case "radio":
                    t.$input.prop("checked") && (n[t.radio] = t.value)
            }
        }), n
    }, m.contextMenu.fromMenu = function(e) {
        var t = {};
        return function s(i, e, c) {
            return c || (c = 0), e.each(function() {
                var e, t, n = m(this),
                    o = this,
                    a = this.nodeName.toLowerCase();
                switch ("label" === a && n.find("input, textarea, select").length && (e = n.text(), a = (o = (n = n.children().first()).get(0)).nodeName.toLowerCase()), a) {
                    case "menu":
                        t = {
                            name: n.attr("label"),
                            items: {}
                        }, c = s(t.items, n.children(), c);
                        break;
                    case "a":
                    case "button":
                        t = {
                            name: n.text(),
                            disabled: !!n.attr("disabled"),
                            callback: function() {
                                n.get(0).click()
                            }
                        };
                        break;
                    case "menuitem":
                    case "command":
                        switch (n.attr("type")) {
                            case void 0:
                            case "command":
                            case "menuitem":
                                t = {
                                    name: n.attr("label"),
                                    disabled: !!n.attr("disabled"),
                                    icon: n.attr("icon"),
                                    callback: function() {
                                        n.get(0).click()
                                    }
                                };
                                break;
                            case "checkbox":
                                t = {
                                    type: "checkbox",
                                    disabled: !!n.attr("disabled"),
                                    name: n.attr("label"),
                                    selected: !!n.attr("checked")
                                };
                                break;
                            case "radio":
                                t = {
                                    type: "radio",
                                    disabled: !!n.attr("disabled"),
                                    name: n.attr("label"),
                                    radio: n.attr("radiogroup"),
                                    value: n.attr("id"),
                                    selected: !!n.attr("checked")
                                };
                                break;
                            default:
                                t = void 0
                        }
                        break;
                    case "hr":
                        t = "-------";
                        break;
                    case "input":
                        switch (n.attr("type")) {
                            case "text":
                                t = {
                                    type: "text",
                                    name: e || l(o),
                                    disabled: !!n.attr("disabled"),
                                    value: n.val()
                                };
                                break;
                            case "checkbox":
                                t = {
                                    type: "checkbox",
                                    name: e || l(o),
                                    disabled: !!n.attr("disabled"),
                                    selected: !!n.attr("checked")
                                };
                                break;
                            case "radio":
                                t = {
                                    type: "radio",
                                    name: e || l(o),
                                    disabled: !!n.attr("disabled"),
                                    radio: !!n.attr("name"),
                                    value: n.val(),
                                    selected: !!n.attr("checked")
                                };
                                break;
                            default:
                                t = void 0
                        }
                        break;
                    case "select":
                        t = {
                            type: "select",
                            name: e || l(o),
                            disabled: !!n.attr("disabled"),
                            selected: n.val(),
                            options: {}
                        }, n.children().each(function() {
                            t.options[this.value] = m(this).text()
                        });
                        break;
                    case "textarea":
                        t = {
                            type: "textarea",
                            name: e || l(o),
                            disabled: !!n.attr("disabled"),
                            value: n.val()
                        };
                        break;
                    case "label":
                        break;
                    default:
                        t = {
                            type: "html",
                            html: n.clone(!0)
                        }
                }
                t && (i["key" + ++c] = t)
            }), c
        }(t, m(e).children()), t
    }, m.contextMenu.defaults = g, m.contextMenu.types = v, m.contextMenu.handle = b, m.contextMenu.op = $, m.contextMenu.menus = x
});
$(document).ready(function() {
    hide();
    setTimeout(function() {
        $('.inventWrapper__col-blockContent').css('max-height', ($('.inventWrapper').height() - 85 - 48));
        $('.inventWrapper__col').css('height', ($('.inventWrapper').height()))
    }, 200);
    setTimeout(function() {
        $('.inventWrapper__col-blockContent').addClass('fadeInDown')
    }, 600);
    setTimeout(function() {
        $('.inventWrapper__col-blockContent-listingItem-context-master').addClass('fadeInLeft')
    }, 1400)
});
var ifShown = !1;
var scroll = 0;

let hideWait = false;

function eventSend(data) {
    try {
        if (data.type == 'show') {
            show()
        }
        if (data.type == 'hide') {
            hide()
        }
        if (data.type == 'updateInfo') {
            $('#name').text(data.name);
            $('#age').text(data.age);
            $('#month').text(data.month)
        }
        if (data.type == 'updateLabel') {
            $('#invLabel').text(data.text)
        }
        if (data.type == 'clearWeapons') {
            $('#invWeapons').html('')
        }
        if (data.type == 'clearItems') {
            $('#invContent').html('')
        }
        if (data.type == 'addItem') {

            let isStack = true;

            let iId = parseInt(data.itemId);
            if (iId == 8 || iId == 41 || iId == 42 || iId == 43 || iId == 44 || iId == 50 || iId == 51 || iId == 52 || iId == 53 || iId == 252)
                isStack = false;
            if (iId >= 138 && iId <= 145)
                isStack = false;
            if (iId >= 154 && iId <= 157)
                isStack = false;
            if (iId >= 163 && iId <= 180)
                isStack = false;
            if (iId >= 264 && iId <= 277)
                isStack = false;

            var numItems = $('.itemId' + data.itemId).length;
            if (numItems >= 1 && data.ownerType != 0 && isStack) {
                let count = parseInt($('.itemId' + data.itemId).attr('data-itemCount'));
                $('.itemId' + data.itemId).attr('data-itemCount', ++count);
                $('#labelItemId' + data.itemId).text(data.label + ' (' + (count) + 'шт.)');
                return;
            }

            let invHtml = '<div class="inventWrapper__col-blockContent-listingItem panel1 ' + data.menuType + ' itemId' + data.itemId + '" data-itemCount="1" data-type="inv" data-ownerId="' + data.ownerId + '" data-ownerType="' + data.ownerType + '" data-id="' + data.id + '" data-item-id="' + data.itemId + '" data-number="' + data.number + '" data-prefix="' + data.prefix + '" data-count="' + data.count + '" data-key="' + data.key + '">' + '<img src="_img/items/Item_' + data.itemId + '.png"><div><span class="inventWrapper__col-blockContent-listingItem-title" id="labelItemId' + data.itemId + '">' + data.label + '</span>' + '<span class="inventWrapper__col-blockContent-listingItem-setting">Обьем: ' + data.wg + 'см³</span></div>' + '</div>';


            $('#invContent').html(invHtml + $('#invContent').html());
            $('.inventWrapper__col-blockContent').css('max-height', ($('.inventWrapper').height() - 85 - 48));
            $('.inventWrapper__col').css('height', ($('.inventWrapper').height()));
            $('#invContent').scrollTop(scroll);
        }
        if (data.type == 'addWeaponItem') {
            let invHtml = '<div class="inventWrapper__col-blockContent-listingItem panel3 gunItem" data-type="m1" data-item-id="' + data.itemId + '" data-ammoItem="' + data.ammoItem + '" data-ammoCount="' + data.ammoCount + '">' + '<span class="inventWrapper__col-blockContent-listingItem-title">' + data.label + '</span>' + '</div>';
            $('#invWeapons').html(invHtml + $('#invWeapons').html());
            $('.inventWrapper__col-blockContent').css('max-height', ($('.inventWrapper').height() - 85 - 48));
            $('.inventWrapper__col').css('height', ($('.inventWrapper').height()))
        }
        if (data.type == 'updateEquip') {
            if (data.phone)
                $('#eq-phone').removeClass('NotActive');
            else $('#eq-phone').addClass('NotActive');
            if (data.bankcard)
                $('#eq-bankcard').removeClass('NotActive');
            else $('#eq-bankcard').addClass('NotActive');
            if (data.clock)
                $('#eq-clock').removeClass('NotActive');
            else $('#eq-clock').addClass('NotActive');
            if (data.bracelet)
                $('#eq-bracelet').removeClass('NotActive');
            else $('#eq-bracelet').addClass('NotActive');
            if (data.watch)
                $('#eq-watch').removeClass('NotActive');
            else $('#eq-watch').addClass('NotActive');
            if (data.ear)
                $('#eq-ear').removeClass('NotActive');
            else $('#eq-ear').addClass('NotActive');
            if (data.glasses)
                $('#eq-glasses').removeClass('NotActive');
            else $('#eq-glasses').addClass('NotActive');
            if (data.hat)
                $('#eq-hat').removeClass('NotActive');
            else $('#eq-hat').addClass('NotActive');
            if (data.accessorie)
                $('#eq-accessorie').removeClass('NotActive');
            else $('#eq-accessorie').addClass('NotActive');
            if (data.foot)
                $('#eq-foot').removeClass('NotActive');
            else $('#eq-foot').addClass('NotActive');
            if (data.leg)
                $('#eq-leg').removeClass('NotActive');
            else $('#eq-leg').addClass('NotActive');
            if (data.torso)
                $('#eq-torso').removeClass('NotActive');
            else $('#eq-torso').addClass('NotActive');
            if (data.mask)
                $('#eq-mask').removeClass('NotActive');
            else $('#eq-mask').addClass('NotActive')
        }
    } catch (e) {
        console.log(e)
    }
}
let blockSpamVar = false;

function blockSpam(){
    blockSpamVar = true;
    setTimeout(() => {
        blockSpamVar = false
    }, 1000);
}

function hide() {
    $('.contextMenu').hide();
    if (ifShown) {
        $('.inventWrapper').removeClass('fadeIn');
        $('.inventWrapper').addClass('fadeOut');
        ifShown = !1
    }
    scroll = 0;
}

function show() {
    if (!ifShown) {
        $('.inventWrapper').show();
        $('.inventWrapper').removeClass('fadeOut');
        $('.inventWrapper').addClass('fadeIn');
        ifShown = !0
    }
}
$(window).resize(function() {
    $('.inventWrapper').css('height', $(window).height());
    setTimeout(function() {
        $('.inventWrapper__col-blockContent').css('height', ($('.inventWrapper').height()))
    }, 200);
    $('.inventWrapper__col').css('height', ($('.inventWrapper').height()))
});
$(function() {
    $.contextMenu({
        selector: '.panel1[data-type="inv"]',
        build: function($trigger) {
            if(!ifShown) return;
            var options = {
                callback: function(key, options) {
                    // mp.trigger('client:inv:hide');
                    if(blockSpamVar) return;
                    blockSpam();
                    var m = "clicked: " + key;
                    window.console && console.log(m);
                    $(this).addClass('NotActive');
                    scroll = $('#invContent').scrollTop();
                    if (key == 'transferPlayerItemButton' || key == 'transferToStockPlayerItemButton') {
                        mp.trigger("client:inv:hide")
                    }
                    mp.trigger("client:inv:doItem", key, $(this).attr('data-ownerId'), $(this).attr('data-ownerType'), $(this).attr('data-id'), $(this).attr('data-item-id'), $(this).attr('data-number'), $(this).attr('data-prefix'), $(this).attr('data-count'), $(this).attr('data-key'));
                },
                items: {}
            };
            if ($trigger.hasClass('takeItemButton'))
                options.items.takeItemButton = {
                    name: "Взять"
                };
            if ($trigger.hasClass('usePlayerItemButton'))
                options.items.usePlayerItemButton = {
                    name: "Использовать"
                };
            if ($trigger.hasClass('transferLotoItemButton'))
                options.items.transferLotoItemButton = {
                    name: "Обменять в любом 24/7"
                };
            if ($trigger.hasClass('infoLotoItemButton'))
                options.items.infoLotoItemButton = {
                    name: "Информация о билете"
                };
            if ($trigger.hasClass('equipItemButton'))
                options.items.equipItemButton = {
                    name: "Экипировать"
                };
            if ($trigger.hasClass('takeOneGrammPlayerItemButton'))
                options.items.takeOneGrammPlayerItemButton = {
                    name: "Взять 1гр."
                };
            if ($trigger.hasClass('takeTenGrammPlayerItemButton'))
                options.items.takeTenGrammPlayerItemButton = {
                    name: "Взять 10гр."
                };
            if ($trigger.hasClass('takeFiftyGrammPlayerItemButton'))
                options.items.takeFiftyGrammPlayerItemButton = {
                    name: "Взять 50гр."
                };
            if ($trigger.hasClass('weighPlayerItemButton'))
                options.items.weighPlayerItemButton = {
                    name: "Взвесить"
                };
            if ($trigger.hasClass('takeOneItemPlayerItemButton'))
                options.items.takeOneItemPlayerItemButton = {
                    name: "Взять 1шт."
                };
            if ($trigger.hasClass('countPlayerItemButton'))
                options.items.countPlayerItemButton = {
                    name: "Посчитать"
                };
            if ($trigger.hasClass('countMoneyPlayerItemButton'))
                options.items.countMoneyPlayerItemButton = {
                    name: "Посчитать"
                };
            if ($trigger.hasClass('countBulletsPlayerItemButton'))
                options.items.countBulletsPlayerItemButton = {
                    name: "Посчитать"
                };
            if ($trigger.hasClass('transferPlayerItemButton'))
                options.items.transferPlayerItemButton = {
                    name: "Передать"
                };
            if ($trigger.hasClass('transferToVehiclePlayerItemButton'))
                options.items.transferToVehiclePlayerItemButton = {
                    name: "Положить в транспорт"
                };
            if ($trigger.hasClass('transferToFridgePlayerItemButton'))
                options.items.transferToFridgePlayerItemButton = {
                    name: "Положить в холодильник"
                };
            if ($trigger.hasClass('transferToStockPlayerItemButton'))
                options.items.transferToStockPlayerItemButton = {
                    name: "Положить на склад"
                };
            if ($trigger.hasClass('throwToGroundPlayerItemButton'))
                options.items.throwToGroundPlayerItemButton = {
                    name: "Выкинуть на землю"
                };
            if ($trigger.hasClass('skate'))
                options.items.skate = {
                    name: "Прокатиться"
                };
            return options
        }
    });
    $.contextMenu({
        selector: '.panel2[data-menu="bar2"]',
        build: function($trigger) {
            var options = {
                callback: function(key, options) {
                    mp.trigger('client:inv:hide')
                    if(blockSpamVar) return;
                    blockSpam();
                    $(this).addClass('NotActive');
                    if (key == 'unequp') {
                        $(this).addClass('NotActive');
                        scroll = $('#invContent').scrollTop();
                        mp.trigger("client:inv:doItemUnEquip", $(this).attr('data-item-id'))
                    } else if (key == 'smartphone') {
                        mp.trigger("client:inv:openPhone")
                    }
                },
                items: {}
            };
            if ($trigger.hasClass('smartphone'))
                options.items.smartphone = {
                    name: "Использовать"
                };
            options.items.unequp = {
                name: "Снять с экипировки"
            };
            return options
        }
    });
    $.contextMenu({
        selector: '.panel3[data-type="m1"]',
        callback: function(key, options) {
            mp.trigger('client:inv:hide')
            if(blockSpamVar) return;
                    blockSpam();
            var m = "clicked: " + key;
            $(this).addClass('NotActive');
            $('.gunItem').addClass('NotActive');
            scroll = $('#invContent').scrollTop();
            if (key == 'unequp') {
                mp.trigger("client:inv:doGunUnEquip", $(this).attr('data-item-id'), $(this).attr('data-ammoItem'), $(this).attr('data-ammoCount'))
            } else if (key == 'unload') {
                mp.trigger("client:inv:doGunUnLoad", $(this).attr('data-item-id'), $(this).attr('data-ammoItem'), $(this).attr('data-ammoCount'))
            }
        },
        items: {
            "unequp": {
                name: "Снять с экипировки"
            },
            "unload": {
                name: "Разрядить оружие"
            },
        }
    })
})